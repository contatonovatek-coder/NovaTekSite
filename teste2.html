<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOVATEK - Sistema Financeiro Avan√ßado</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #2d1b69 100%);
            color: #e0e7ff;
            overflow-x: hidden;
            min-height: 100%;
            position: relative;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(6, 182, 212, 0.05) 0%, transparent 50%);
            animation: backgroundMove 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundMove {
            0%, 100% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(-20px) translateY(-10px); }
            50% { transform: translateX(20px) translateY(10px); }
            75% { transform: translateX(-10px) translateY(20px); }
        }

        /* Login Screen */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100%;
            padding: 2rem;
            animation: fadeIn 0.8s ease-out;
        }

        .login-box {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 32px;
            padding: 3rem;
            width: 100%;
            max-width: 450px;
            box-shadow: 
                0 0 80px rgba(59, 130, 246, 0.4), 
                0 0 120px rgba(147, 51, 234, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: slideUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .login-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.8), transparent);
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .logo {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .logo h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(59, 130, 246, 0.6);
            animation: glow 3s ease-in-out infinite alternate;
            letter-spacing: -2px;
        }

        .logo p {
            color: #06b6d4;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            letter-spacing: 4px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.75rem;
            color: #94a3b8;
            font-size: 0.875rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .form-group input {
            width: 100%;
            padding: 1rem 1.25rem;
            background: rgba(30, 41, 59, 0.6);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            color: #e0e7ff;
            font-size: 1rem;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
            box-sizing: border-box;
        }

        .form-group input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
            transform: translateY(-2px);
        }

        .form-group input::placeholder {
            color: #64748b;
            opacity: 0.8;
        }

        .btn-primary {
            width: 100%;
            padding: 1.25rem;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
            border: none;
            border-radius: 16px;
            color: white;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.4);
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .btn-primary::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }

        .btn-primary:hover::before {
            left: 100%;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 40px rgba(59, 130, 246, 0.6);
        }

        /* Dashboard Layout */
        .dashboard {
            display: none;
            animation: fadeIn 0.6s ease-out;
        }

        .dashboard.active {
            display: block;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 300px;
            height: 100%;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border-right: 1px solid rgba(59, 130, 246, 0.2);
            padding: 2rem 0;
            overflow-y: auto;
            z-index: 100;
            animation: slideRight 0.5s ease-out;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
        }

        .sidebar-logo {
            padding: 0 2rem;
            margin-bottom: 3rem;
            text-align: center;
        }

        .sidebar-logo h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -1px;
        }

        .nav-item {
            padding: 1.25rem 2rem;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 1rem;
            font-weight: 600;
            margin: 0.25rem 1rem;
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .nav-item:hover, .nav-item.active {
            background: rgba(59, 130, 246, 0.15);
            color: #3b82f6;
            transform: translateX(8px);
        }

        .nav-item:hover::before, .nav-item.active::before {
            transform: scaleY(1);
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            filter: drop-shadow(0 0 8px rgba(59, 130, 246, 0.3));
        }

        .main-content {
            margin-left: 300px;
            padding: 2rem;
            min-height: 100%;
            transition: margin-left 0.3s ease;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2.5rem;
            animation: slideDown 0.6s ease-out;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(20px);
            padding: 1.5rem 2rem;
            border-radius: 24px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .header h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            color: #e0e7ff;
            background: linear-gradient(135deg, #e0e7ff 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem 1.5rem;
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .user-profile:hover {
            border-color: #3b82f6;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.4);
            transform: translateY(-2px);
        }

        .user-avatar {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.1rem;
            box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4);
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-bottom: 2.5rem;
        }

        .card {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 24px;
            padding: 2rem;
            transition: all 0.4s ease;
            animation: slideUp 0.6s ease-out;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #06b6d4);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(59, 130, 246, 0.4);
            border-color: #3b82f6;
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .card-title {
            font-size: 0.875rem;
            color: #94a3b8;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .card-value {
            font-size: 2.5rem;
            font-weight: 800;
            color: #e0e7ff;
            margin-bottom: 1rem;
            font-family: 'Poppins', sans-serif;
        }

        .card-change {
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .card-change.positive {
            color: #06b6d4;
        }

        .card-change.negative {
            color: #f43f5e;
        }

        .table-container {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 24px;
            overflow: hidden;
            margin-bottom: 2.5rem;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .table-header {
            padding: 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
            background: rgba(15, 23, 42, 0.5);
        }

        .table-header h3 {
            font-size: 1.5rem;
            color: #e0e7ff;
            font-weight: 700;
        }

        .btn-secondary {
            padding: 0.875rem 1.5rem;
            background: rgba(59, 130, 246, 0.2);
            border: 2px solid #3b82f6;
            border-radius: 12px;
            color: #3b82f6;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            text-transform: uppercase;
            letter-spacing: 1px;
            font-size: 0.875rem;
        }

        .btn-secondary:hover {
            background: rgba(59, 130, 246, 0.3);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.5);
            transform: translateY(-2px);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: rgba(15, 23, 42, 0.7);
        }

        th {
            padding: 1.5rem 2rem;
            text-align: left;
            font-weight: 700;
            color: #94a3b8;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        td {
            padding: 1.5rem 2rem;
            border-top: 1px solid rgba(59, 130, 246, 0.1);
            color: #e0e7ff;
            font-weight: 500;
        }

        tr:hover {
            background: rgba(59, 130, 246, 0.08);
        }

        .status-badge {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            display: inline-block;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .status-badge.success {
            background: rgba(6, 182, 212, 0.2);
            color: #06b6d4;
            border: 1px solid rgba(6, 182, 212, 0.3);
        }

        .status-badge.warning {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.3);
        }

        .status-badge.danger {
            background: rgba(244, 63, 94, 0.2);
            color: #f43f5e;
            border: 1px solid rgba(244, 63, 94, 0.3);
        }

        /* Kanban Board */
        .kanban-board {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .kanban-column {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 24px;
            padding: 2rem;
            min-height: 500px;
            position: relative;
            overflow: hidden;
        }

        .kanban-column::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #06b6d4);
        }

        .kanban-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .kanban-title {
            font-weight: 700;
            color: #e0e7ff;
            font-size: 1.1rem;
        }

        .kanban-count {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 700;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .kanban-card {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            cursor: move;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .kanban-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.4);
            border-color: #3b82f6;
        }

        .kanban-card-title {
            font-weight: 700;
            color: #e0e7ff;
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }

        .kanban-card-meta {
            font-size: 0.875rem;
            color: #94a3b8;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .chat-toggle {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            box-shadow: 0 8px 32px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
            position: relative;
        }

        .chat-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 12px 40px rgba(59, 130, 246, 0.6);
        }

        .chat-window {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 420px;
            height: 600px;
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.98), rgba(30, 41, 59, 0.95));
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 24px;
            display: none;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 
                0 25px 80px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: chatSlideUp 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .chat-window.active {
            display: flex;
        }

        @keyframes chatSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .chat-header {
            padding: 1.25rem 1.5rem;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(139, 92, 246, 0.1));
            border-bottom: 1px solid rgba(59, 130, 246, 0.15);
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: relative;
        }

        .chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.5), transparent);
        }

        .chat-header-info h3 {
            color: #e0e7ff;
            font-weight: 700;
            font-size: 1rem;
            margin-bottom: 0.25rem;
        }

        .chat-header-info p {
            color: #94a3b8;
            font-size: 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .online-indicator {
            width: 8px;
            height: 8px;
            background: #06b6d4;
            border-radius: 50%;
            animation: pulse-dot 2s infinite;
        }

        @keyframes pulse-dot {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            background: rgba(15, 23, 42, 0.3);
        }

        .chat-messages::-webkit-scrollbar {
            width: 4px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.3);
            border-radius: 2px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(59, 130, 246, 0.4);
            border-radius: 2px;
        }

        .message {
            display: flex;
            gap: 0.5rem;
            animation: messageSlide 0.3s ease-out;
            align-items: flex-end;
        }

        .message.own {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #8b5cf6, #06b6d4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .message-content {
            max-width: 75%;
        }

        .message-bubble {
            background: rgba(30, 41, 59, 0.9);
            padding: 0.75rem 1rem;
            border-radius: 16px;
            color: #e0e7ff;
            font-size: 0.85rem;
            line-height: 1.4;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(59, 130, 246, 0.15);
            position: relative;
            word-wrap: break-word;
        }

        .message.own .message-bubble {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
        }

        .message-time {
            font-size: 0.7rem;
            color: #64748b;
            margin-top: 0.25rem;
            opacity: 0.8;
        }

        .message.own .message-time {
            text-align: right;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-input {
            padding: 1rem 1.25rem;
            border-top: 1px solid rgba(59, 130, 246, 0.15);
            background: rgba(30, 41, 59, 0.6);
        }

        .chat-input-container {
            display: flex;
            gap: 0.5rem;
            align-items: flex-end;
        }

        .chat-input-field {
            flex: 1;
            padding: 0.75rem 1rem;
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 18px;
            color: #e0e7ff;
            font-size: 0.85rem;
            resize: none;
            max-height: 80px;
            min-height: 36px;
            font-family: inherit;
        }

        .chat-input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .chat-input-field::placeholder {
            color: #64748b;
        }

        .chat-send-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: none;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }

        .chat-send-btn:hover {
            background: linear-gradient(135deg, #2563eb, #7c3aed);
            transform: scale(1.05);
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            animation: fadeIn 0.3s ease-out;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 24px;
            padding: 2.5rem;
            max-width: 700px;
            width: 90%;
            max-height: 90%;
            overflow-y: auto;
            animation: slideUp 0.3s ease-out;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(59, 130, 246, 0.2);
        }

        .modal-header h3 {
            font-size: 1.75rem;
            color: #e0e7ff;
            font-weight: 700;
        }

        .close-modal {
            background: none;
            border: none;
            color: #94a3b8;
            font-size: 2rem;
            cursor: pointer;
            transition: color 0.3s ease;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-modal:hover {
            color: #f43f5e;
            background: rgba(244, 63, 94, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .search-bar {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
            align-items: center;
        }

        .search-input {
            flex: 1;
            padding: 1rem 1.25rem;
            background: rgba(30, 41, 59, 0.6);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 16px;
            color: #e0e7ff;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .search-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.4);
        }

        .action-buttons {
            display: flex;
            gap: 0.75rem;
        }

        .btn-icon {
            padding: 0.75rem;
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 12px;
            color: #3b82f6;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            backdrop-filter: blur(10px);
        }

        .btn-icon:hover {
            background: rgba(59, 130, 246, 0.3);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
            transform: translateY(-2px);
        }

        .btn-icon.danger {
            color: #f43f5e;
            border-color: rgba(244, 63, 94, 0.3);
            background: rgba(244, 63, 94, 0.2);
        }

        .btn-icon.danger:hover {
            background: rgba(244, 63, 94, 0.3);
            box-shadow: 0 0 20px rgba(244, 63, 94, 0.4);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .sidebar {
                width: 280px;
            }
            
            .main-content {
                margin-left: 280px;
            }
            
            .chat-window {
                width: 350px;
                height: 500px;
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
                padding: 1rem;
            }
            
            .header {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .kanban-board {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .chat-window {
                width: 320px;
                height: 450px;
                right: -10px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideRight {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
            }
            to {
                text-shadow: 0 0 50px rgba(59, 130, 246, 0.9), 0 0 80px rgba(147, 51, 234, 0.7);
            }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Print Styles */
        /* Responsividade Melhorada */
        @media (max-width: 768px) {
            .login-box {
                padding: 2rem;
                margin: 1rem;
            }
            
            .logo h1 {
                font-size: 2rem;
            }
            
            .header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .nav-tabs {
                flex-wrap: wrap;
                padding: 0 10px;
            }
            
            .nav-tab {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .content {
                padding: 20px 10px;
            }
            
            .cards-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .modal-content {
                margin: 20px;
                padding: 20px;
                max-height: 90vh;
            }
            
            .table {
                font-size: 14px;
            }
            
            .table th,
            .table td {
                padding: 10px 8px;
            }
            
            .action-buttons {
                flex-direction: column;
                gap: 5px;
            }
            
            .btn-icon {
                padding: 6px;
                font-size: 12px;
            }
            
            .form-group input,
            .form-group select {
                font-size: 16px; /* Evita zoom no iOS */
            }
        }

        @media (max-width: 480px) {
            .login-box {
                padding: 1.5rem;
            }
            
            .logo h1 {
                font-size: 1.8rem;
            }
            
            .nav-tab {
                padding: 8px 12px;
                font-size: 12px;
            }
            
            .card {
                padding: 15px;
            }
            
            .card-value {
                font-size: 1.5rem;
            }
            
            .section {
                padding: 15px;
            }
            
            .modal-content {
                margin: 10px;
                padding: 15px;
            }
        }

        /* Melhorias de Acessibilidade */
        .btn-primary:focus,
        .btn-secondary:focus,
        .btn-icon:focus {
            outline: 2px solid #667eea;
            outline-offset: 2px;
        }
        
        .form-group input:focus,
        .form-group select:focus {
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        /* Anima√ß√µes suaves */
        * {
            transition: all 0.2s ease;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }
        
        .btn-primary:active,
        .btn-secondary:active {
            transform: translateY(1px);
        }

        @media print {
            .nav-tabs, .header .user-info, .btn-secondary, .action-buttons {
                display: none !important;
            }
            
            .content {
                padding: 0;
            }
            
            .section, .card {
                border: 1px solid #333;
                box-shadow: none;
                background: white;
                color: black;
                break-inside: avoid;
            }
            
            .card-value, th, td {
                color: black;
            }
            
            .table {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Identification Screen -->
    <div class="login-container" id="identificationScreen">
        <div class="login-box">
            <div class="logo">
                <h1>NOVATEK</h1>
                <p>Sistema Financeiro Avan√ßado</p>
            </div>
            <div style="text-align: center; margin-bottom: 2rem;">
                <h3 style="color: #e0e7ff; margin-bottom: 1rem;">üëã Identifique-se para acessar</h3>
                <p style="color: #94a3b8; font-size: 0.875rem;">Digite seu nome para entrar no sistema</p>
            </div>
            <form id="identificationForm" onsubmit="handleIdentification(event)">
                <div class="form-group">
                    <label for="userName">Seu Nome</label>
                    <input type="text" id="userName" placeholder="Digite seu nome completo..." required>
                </div>
                <button type="submit" class="btn-primary">üöÄ Acessar Sistema</button>
            </form>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-logo">
                <h2>NOVATEK</h2>
            </div>
            <nav>
                <div class="nav-item active" data-section="dashboard">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                    </svg>
                    Dashboard
                </div>
                <div class="nav-item" data-section="clientes">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path>
                    </svg>
                    Clientes
                </div>
                <div class="nav-item" data-section="propostas">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Propostas
                </div>
                <div class="nav-item" data-section="leads">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path>
                    </svg>
                    Pipeline de Leads
                </div>
                <div class="nav-item" data-section="agenda">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Agenda & Reuni√µes
                </div>
                <div class="nav-item" data-section="financeiro">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Financeiro
                </div>
                <div class="nav-item" data-section="contratos">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Contratos
                </div>
                <div class="nav-item" data-section="usuarios">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    Usu√°rios
                </div>
                <div class="nav-item" data-section="relatorios">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Relat√≥rios
                </div>
                <div class="nav-item" data-section="configuracoes">
                    <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    Configura√ß√µes
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="header">
                <h1 id="pageTitle">Dashboard</h1>
                <div class="user-profile">
                    <div class="user-avatar">US</div>
                    <div>
                        <div style="font-weight: 700;">USU√ÅRIO</div>
                        <div style="font-size: 0.75rem; color: #94a3b8;">Sistema NOVATEK</div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Section -->
            <div class="content-section active" id="section-dashboard">
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Receitas do M√™s</span>
                            <span style="font-size: 1.5rem;">üí∞</span>
                        </div>
                        <div class="card-value" id="totalReceitas">R$ 0</div>
                        <div class="card-change positive">
                            ‚ÜóÔ∏è Crescimento mensal
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Despesas do M√™s</span>
                            <span style="font-size: 1.5rem;">üìä</span>
                        </div>
                        <div class="card-value" id="totalDespesas">R$ 0</div>
                        <div class="card-change positive">
                            ‚ÜòÔ∏è Controle de gastos
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Lucro L√≠quido</span>
                            <span style="font-size: 1.5rem;">üìà</span>
                        </div>
                        <div class="card-value" id="lucroLiquido">R$ 0</div>
                        <div class="card-change positive">
                            ‚ÜóÔ∏è Resultado final
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Clientes Ativos</span>
                            <span style="font-size: 1.5rem;">üë•</span>
                        </div>
                        <div class="card-value" id="totalClientes">0</div>
                        <div class="card-change positive">
                            ‚ÜóÔ∏è Base de clientes
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clientes Section -->
            <div class="content-section" id="section-clientes">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="üîç Buscar clientes por nome, email ou telefone..." id="clienteSearch">
                    <button class="btn-secondary" onclick="openModal('clienteModal')">‚ûï Novo Cliente</button>
                </div>
                <div class="table-container">
                    <div class="table-header">
                        <h3>üë• Lista de Clientes</h3>
                        <button class="btn-secondary" onclick="exportData('clientes')">üìä Exportar Dados</button>
                    </div>
                    <table id="clientesTable">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>E-mail</th>
                                <th>Telefone</th>
                                <th>Empresa</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="clientesTableBody">
                            <tr class="empty-state">
                                <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üë•</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhum cliente cadastrado</div>
                                    <div style="font-size: 0.875rem;">Clique em "Novo Cliente" para come√ßar</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Propostas Section -->
            <div class="content-section" id="section-propostas">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="üîç Buscar propostas por n√∫mero, cliente ou valor...">
                    <button class="btn-secondary" onclick="openModal('propostaModal')">üìù Nova Proposta</button>
                </div>
                <div class="table-container">
                    <div class="table-header">
                        <h3>üìã Propostas Comerciais</h3>
                        <button class="btn-secondary" onclick="printReport()">üñ®Ô∏è Imprimir Relat√≥rio</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>N¬∫ Proposta</th>
                                <th>Cliente</th>
                                <th>Valor</th>
                                <th>Data</th>
                                <th>Validade</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="propostasTableBody">
                            <tr class="empty-state">
                                <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìù</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhuma proposta criada</div>
                                    <div style="font-size: 0.875rem;">Clique em "Nova Proposta" para come√ßar</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Leads Section -->
            <div class="content-section" id="section-leads">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="üîç Buscar leads por empresa ou valor...">
                    <button class="btn-secondary" onclick="openModal('leadModal')">üéØ Novo Lead</button>
                </div>
                <div class="kanban-board">
                    <div class="kanban-column">
                        <div class="kanban-header">
                            <span class="kanban-title">üÜï Novos Leads</span>
                            <span class="kanban-count">0</span>
                        </div>
                        <div class="empty-kanban">
                            <div style="text-align: center; padding: 2rem; color: #64748b;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üéØ</div>
                                <div style="font-size: 0.875rem;">Nenhum lead novo</div>
                            </div>
                        </div>
                    </div>
                    <div class="kanban-column">
                        <div class="kanban-header">
                            <span class="kanban-title">üìû Em Contato</span>
                            <span class="kanban-count">0</span>
                        </div>
                        <div class="empty-kanban">
                            <div style="text-align: center; padding: 2rem; color: #64748b;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìû</div>
                                <div style="font-size: 0.875rem;">Nenhum contato ativo</div>
                            </div>
                        </div>
                    </div>
                    <div class="kanban-column">
                        <div class="kanban-header">
                            <span class="kanban-title">üìã Proposta Enviada</span>
                            <span class="kanban-count">0</span>
                        </div>
                        <div class="empty-kanban">
                            <div style="text-align: center; padding: 2rem; color: #64748b;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìã</div>
                                <div style="font-size: 0.875rem;">Nenhuma proposta enviada</div>
                            </div>
                        </div>
                    </div>
                    <div class="kanban-column">
                        <div class="kanban-header">
                            <span class="kanban-title">‚úÖ Fechado</span>
                            <span class="kanban-count">0</span>
                        </div>
                        <div class="empty-kanban">
                            <div style="text-align: center; padding: 2rem; color: #64748b;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚úÖ</div>
                                <div style="font-size: 0.875rem;">Nenhum lead fechado</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Agenda Section -->
            <div class="content-section" id="section-agenda">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="üîç Buscar reuni√µes por t√≠tulo, participante ou data...">
                    <button class="btn-secondary" onclick="openModal('reuniaoModal')">üìÖ Nova Reuni√£o</button>
                </div>
                
                <div class="table-container">
                    <div class="table-header">
                        <h3>üìã Pr√≥ximas Reuni√µes</h3>
                        <button class="btn-secondary" onclick="exportData('agenda')">üìä Exportar Agenda</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Data & Hora</th>
                                <th>T√≠tulo</th>
                                <th>Participantes</th>
                                <th>Local/Link</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="reunioesTableBody">
                            <tr class="empty-state">
                                <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìÖ</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhuma reuni√£o agendada</div>
                                    <div style="font-size: 0.875rem;">Clique em "Nova Reuni√£o" para agendar</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Financeiro Section -->
            <div class="content-section" id="section-financeiro">
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Total de Receitas</span>
                            <span style="font-size: 1.5rem;">üí∞</span>
                        </div>
                        <div class="card-value" id="totalReceitasFinanceiro">R$ 0</div>
                        <div class="card-change positive">üìà Receitas registradas</div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Total de Despesas</span>
                            <span style="font-size: 1.5rem;">üí∏</span>
                        </div>
                        <div class="card-value" id="totalDespesasFinanceiro">R$ 0</div>
                        <div class="card-change negative">üìä Despesas registradas</div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Saldo Atual</span>
                            <span style="font-size: 1.5rem;">üí≥</span>
                        </div>
                        <div class="card-value" id="saldoAtual">R$ 0</div>
                        <div class="card-change positive">üìà Resultado l√≠quido</div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Movimenta√ß√µes</span>
                            <span style="font-size: 1.5rem;">üìã</span>
                        </div>
                        <div class="card-value" id="totalMovimentacoes">0</div>
                        <div class="card-change positive">üìä Total registrado</div>
                    </div>
                </div>
                <div class="table-container">
                    <div class="table-header">
                        <h3>üíº Movimenta√ß√µes Financeiras</h3>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn-secondary" onclick="openModal('financeiroModal')">‚ûï Nova Movimenta√ß√£o</button>
                            <button class="btn-secondary" onclick="exportData('financeiro')">üìä Exportar</button>
                            <button class="btn-secondary" onclick="printReport()">üñ®Ô∏è Imprimir</button>
                        </div>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descri√ß√£o</th>
                                <th>Categoria</th>
                                <th>Tipo</th>
                                <th>Valor</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="financeiroTableBody">
                            <tr class="empty-state">
                                <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üí∞</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhuma movimenta√ß√£o registrada</div>
                                    <div style="font-size: 0.875rem;">Clique em "Nova Movimenta√ß√£o" para come√ßar</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Contratos Section -->
            <div class="content-section" id="section-contratos">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="üîç Buscar contratos por n√∫mero, cliente ou valor...">
                    <button class="btn-secondary" onclick="openModal('contratoModal')">üìÑ Novo Contrato</button>
                </div>
                <div class="table-container">
                    <div class="table-header">
                        <h3>üìã Contratos Ativos</h3>
                        <button class="btn-secondary" onclick="exportData('contratos')">üìä Exportar Dados</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>N¬∫ Contrato</th>
                                <th>Cliente</th>
                                <th>Valor Total</th>
                                <th>Data In√≠cio</th>
                                <th>Vig√™ncia</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="contratosTableBody">
                            <tr class="empty-state">
                                <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üìÑ</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhum contrato cadastrado</div>
                                    <div style="font-size: 0.875rem;">Clique em "Novo Contrato" para come√ßar</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Usu√°rios Section -->
            <div class="content-section" id="section-usuarios">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="üîç Buscar usu√°rios por nome, email ou cargo...">
                    <button class="btn-secondary" onclick="openModal('usuarioModal')">üë§ Novo Usu√°rio</button>
                </div>
                <div class="table-container">
                    <div class="table-header">
                        <h3>üë• Usu√°rios do Sistema</h3>
                        <button class="btn-secondary" onclick="exportData('usuarios')">üìä Exportar Dados</button>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th>Nome</th>
                                <th>E-mail</th>
                                <th>Cargo</th>
                                <th>Permiss√£o</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="usuariosTableBody">
                            <tr class="empty-state">
                                <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                                    <div style="font-size: 3rem; margin-bottom: 1rem;">üë§</div>
                                    <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhum usu√°rio cadastrado</div>
                                    <div style="font-size: 0.875rem;">Clique em "Novo Usu√°rio" para come√ßar</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Relat√≥rios Section -->
            <div class="content-section" id="section-relatorios">
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Relat√≥rio Mensal</span>
                            <span style="font-size: 1.5rem;">üìä</span>
                        </div>
                        <div class="card-value">Janeiro 2024</div>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <button class="btn-secondary" style="flex: 1;" onclick="generateReport('mensal')">üìÑ PDF</button>
                            <button class="btn-secondary" style="flex: 1;" onclick="printReport()">üñ®Ô∏è Imprimir</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Relat√≥rio Anual</span>
                            <span style="font-size: 1.5rem;">üìà</span>
                        </div>
                        <div class="card-value">2024</div>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <button class="btn-secondary" style="flex: 1;" onclick="generateReport('anual')">üìÑ PDF</button>
                            <button class="btn-secondary" style="flex: 1;" onclick="printReport()">üñ®Ô∏è Imprimir</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Relat√≥rio Clientes</span>
                            <span style="font-size: 1.5rem;">üë•</span>
                        </div>
                        <div class="card-value" id="reportClientes">0 Ativos</div>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <button class="btn-secondary" style="flex: 1;" onclick="generateReport('clientes')">üìÑ PDF</button>
                            <button class="btn-secondary" style="flex: 1;" onclick="printReport()">üñ®Ô∏è Imprimir</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <span class="card-title">Relat√≥rio Financeiro</span>
                            <span style="font-size: 1.5rem;">üí∞</span>
                        </div>
                        <div class="card-value">Completo</div>
                        <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                            <button class="btn-secondary" style="flex: 1;" onclick="generateReport('financeiro')">üìÑ PDF</button>
                            <button class="btn-secondary" style="flex: 1;" onclick="printReport()">üñ®Ô∏è Imprimir</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Configura√ß√µes Section -->
            <div class="content-section" id="section-configuracoes">
                <div class="table-container">
                    <div class="table-header">
                        <h3>‚öôÔ∏è Configura√ß√µes do Sistema</h3>
                        <p style="color: #94a3b8; font-size: 0.875rem;">Personalize as configura√ß√µes da sua empresa</p>
                    </div>
                    <div style="padding: 2rem;">
                        <div class="form-row">
                            <div class="form-group">
                                <label>Nome da Empresa</label>
                                <input type="text" value="NOVATEK" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            </div>
                            <div class="form-group">
                                <label>E-mail Corporativo</label>
                                <input type="email" value="contato@novatek.com" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Telefone</label>
                                <input type="tel" value="(11) 3000-0000" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            </div>
                            <div class="form-group">
                                <label>CNPJ</label>
                                <input type="text" value="00.000.000/0001-00" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            </div>
                        </div>
                        <button class="btn-primary" style="margin-top: 2rem;" onclick="saveConfiguracoes()">üíæ Salvar Configura√ß√µes</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Widget -->
    <div class="chat-widget">
        <button class="chat-toggle" id="chatToggle">üí¨</button>
        <div class="chat-window" id="chatWindow">
            <div class="chat-header">
                <div class="chat-header-info">
                    <h3>üí¨ Chat da Equipe</h3>
                    <p><span class="online-indicator"></span> 3 pessoas online</p>
                </div>
            </div>
            <div class="chat-messages" id="chatMessages">
                <div class="message">
                    <div class="message-avatar">CM</div>
                    <div class="message-content">
                        <div class="message-bubble">Oi pessoal! Como est√£o os n√∫meros de hoje? üìä</div>
                        <div class="message-time">10:30</div>
                    </div>
                </div>
                <div class="message own">
                    <div class="message-avatar">AD</div>
                    <div class="message-content">
                        <div class="message-bubble">Tudo √≥timo! Fechamos mais 3 contratos hoje üéâ</div>
                        <div class="message-time">10:32</div>
                    </div>
                </div>
                <div class="message">
                    <div class="message-avatar">AS</div>
                    <div class="message-content">
                        <div class="message-bubble">Excelente! Vou atualizar o pipeline üöÄ</div>
                        <div class="message-time">10:35</div>
                    </div>
                </div>
            </div>
            <div class="chat-input">
                <div class="chat-input-container">
                    <textarea class="chat-input-field" id="chatInput" placeholder="Digite sua mensagem..." rows="1"></textarea>
                    <button class="chat-send-btn" id="audioBtn" title="Gravar √Åudio" onclick="toggleAudioRecording()">üé§</button>
                    <button class="chat-send-btn" id="sendBtn" title="Enviar">üì§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Modal Cliente -->
    <div class="modal" id="clienteModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üë§ Novo Cliente</h3>
                <button class="close-modal" onclick="closeModal('clienteModal')">√ó</button>
            </div>
            <form onsubmit="saveCliente(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo</label>
                        <input type="text" name="nome" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" name="email" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="tel" name="telefone" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Empresa</label>
                        <input type="text" name="empresa" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Cliente</button>
            </form>
        </div>
    </div>

    <!-- Modal Proposta -->
    <div class="modal" id="propostaModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìù Nova Proposta</h3>
                <button class="close-modal" onclick="closeModal('propostaModal')">√ó</button>
            </div>
            <form onsubmit="saveProposta(event)">
                <div class="form-group">
                    <label>Cliente</label>
                    <select name="cliente" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                        <option value="">Selecione um cliente</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Valor (R$)</label>
                        <input type="number" name="valor" step="0.01" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Validade</label>
                        <input type="date" name="validade" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o dos Servi√ßos</label>
                    <textarea name="descricao" rows="4" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff; resize: vertical;"></textarea>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Proposta</button>
            </form>
        </div>
    </div>

    <!-- Modal Lead -->
    <div class="modal" id="leadModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üéØ Novo Lead</h3>
                <button class="close-modal" onclick="closeModal('leadModal')">√ó</button>
            </div>
            <form onsubmit="saveLead(event)">
                <div class="form-group">
                    <label>Nome da Empresa</label>
                    <input type="text" name="empresa" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Valor Estimado (R$)</label>
                        <input type="number" name="valor" step="0.01" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Est√°gio</label>
                        <select name="estagio" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            <option value="">Selecione o est√°gio</option>
                            <option value="novos">Novos Leads</option>
                            <option value="contato">Em Contato</option>
                            <option value="proposta">Proposta Enviada</option>
                            <option value="fechado">Fechado</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Contato Principal</label>
                        <input type="text" name="contato" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Telefone</label>
                        <input type="tel" name="telefone" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Lead</button>
            </form>
        </div>
    </div>

    <!-- Modal Contrato -->
    <div class="modal" id="contratoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìÑ Novo Contrato</h3>
                <button class="close-modal" onclick="closeModal('contratoModal')">√ó</button>
            </div>
            <form onsubmit="saveContrato(event)">
                <div class="form-group">
                    <label>Cliente</label>
                    <select name="cliente" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                        <option value="">Selecione um cliente</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Valor Total (R$)</label>
                        <input type="number" name="valor" step="0.01" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Vig√™ncia (meses)</label>
                        <input type="number" name="vigencia" min="1" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <div class="form-group">
                    <label>Objeto do Contrato</label>
                    <textarea name="objeto" rows="3" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff; resize: vertical;"></textarea>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Contrato</button>
            </form>
        </div>
    </div>

    <!-- Modal Reuni√£o -->
    <div class="modal" id="reuniaoModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìÖ Nova Reuni√£o</h3>
                <button class="close-modal" onclick="closeModal('reuniaoModal')">√ó</button>
            </div>
            <form onsubmit="saveReuniao(event)">
                <div class="form-group">
                    <label>T√≠tulo da Reuni√£o</label>
                    <input type="text" name="titulo" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Data</label>
                        <input type="date" name="data" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Hor√°rio</label>
                        <input type="time" name="hora" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <div class="form-group">
                    <label>Participantes (separados por v√≠rgula)</label>
                    <input type="text" name="participantes" placeholder="Jo√£o Silva, Maria Santos, Pedro Costa..." style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                </div>
                <button type="submit" class="btn-primary">üìÖ Agendar Reuni√£o</button>
            </form>
        </div>
    </div>

    <!-- Modal Financeiro -->
    <div class="modal" id="financeiroModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí∞ Nova Movimenta√ß√£o</h3>
                <button class="close-modal" onclick="closeModal('financeiroModal')">√ó</button>
            </div>
            <form onsubmit="saveFinanceiro(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>Data</label>
                        <input type="date" name="data" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Tipo</label>
                        <select name="tipo" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            <option value="">Selecione o tipo</option>
                            <option value="receita">üí∞ Receita</option>
                            <option value="despesa">üí∏ Despesa</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <input type="text" name="descricao" required placeholder="Ex: Pagamento Cliente - Jo√£o Silva" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Categoria</label>
                        <select name="categoria" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            <option value="">Selecione a categoria</option>
                            <option value="Servi√ßos">Servi√ßos</option>
                            <option value="Consultoria">Consultoria</option>
                            <option value="Operacional">Operacional</option>
                            <option value="Fixo">Fixo</option>
                            <option value="Marketing">Marketing</option>
                            <option value="Vendas">Vendas</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Valor (R$)</label>
                        <input type="number" name="valor" step="0.01" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Movimenta√ß√£o</button>
            </form>
        </div>
    </div>

    <!-- Modal Usu√°rio -->
    <div class="modal" id="usuarioModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üë§ Novo Usu√°rio</h3>
                <button class="close-modal" onclick="closeModal('usuarioModal')">√ó</button>
            </div>
            <form onsubmit="saveUsuario(event)">
                <div class="form-group">
                    <label>üì∑ Foto do Perfil</label>
                    <input type="file" name="foto" accept="image/*" onchange="previewFoto(this)" style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    <div id="fotoPreview" style="margin-top: 10px; text-align: center; display: none;">
                        <img id="previewImg" style="width: 80px; height: 80px; border-radius: 50%; object-fit: cover; border: 2px solid #3b82f6;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nome Completo</label>
                        <input type="text" name="nome" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>E-mail</label>
                        <input type="email" name="email" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Cargo</label>
                        <input type="text" name="cargo" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                    </div>
                    <div class="form-group">
                        <label>Permiss√£o</label>
                        <select name="permissao" required style="width: 100%; padding: 0.875rem 1rem; background: rgba(30, 41, 59, 0.5); border: 1px solid rgba(59, 130, 246, 0.3); border-radius: 12px; color: #e0e7ff;">
                            <option value="">Selecione a permiss√£o</option>
                            <option value="usuario">Usu√°rio</option>
                            <option value="gerente">Gerente</option>
                            <option value="admin">Administrador</option>
                        </select>
                    </div>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Usu√°rio</button>
            </form>
        </div>
    </div>

    <script>
        // Global Variables
        let currentUser = 'CA';
        let clientes = [];
        let propostas = [];
        let leads = [];
        let contratos = [];
        let usuarios = [];
        let financeiro = [];
        let meetings = [];
        let chatMessages = [];
        let editingId = null;

        // Sistema de Armazenamento Local
        function saveData(key, data) {
            try {
                localStorage.setItem(`novatek_${key}`, JSON.stringify(data));
                console.log(`‚úÖ Dados salvos: ${key}`);
            } catch (error) {
                console.error(`‚ùå Erro ao salvar ${key}:`, error);
                showNotification(`‚ùå Erro ao salvar dados: ${key}`, 'error');
            }
        }

        function loadData(key, defaultValue = []) {
            try {
                const data = localStorage.getItem(`novatek_${key}`);
                return data ? JSON.parse(data) : defaultValue;
            } catch (error) {
                console.error(`‚ùå Erro ao carregar ${key}:`, error);
                return defaultValue;
            }
        }

        function loadAllData() {
            clientes = loadData('clientes', []);
            propostas = loadData('propostas', []);
            leads = loadData('leads', []);
            contratos = loadData('contratos', []);
            meetings = loadData('meetings', []);
            chatMessages = loadData('chatMessages', []);
            
            // Carregar usu√°rios padr√£o do sistema
            usuarios = loadData('usuarios', [
                {
                    id: 1,
                    nome: 'Administrador Sistema',
                    email: 'admin@novatek.com',
                    cargo: 'Administrador',
                    permissao: 'admin',
                    status: 'ativo',
                    avatar: 'AD'
                }
            ]);
            
            // Carregar financeiro com dados exemplo se vazio
            financeiro = loadData('financeiro', []);
            
            console.log('üìä Dados carregados:', {
                clientes: clientes.length,
                propostas: propostas.length,
                leads: leads.length,
                contratos: contratos.length,
                usuarios: usuarios.length,
                financeiro: financeiro.length,
                meetings: meetings.length,
                chatMessages: chatMessages.length
            });
        }

        function saveAllData() {
            saveData('clientes', clientes);
            saveData('propostas', propostas);
            saveData('leads', leads);
            saveData('contratos', contratos);
            saveData('usuarios', usuarios);
            saveData('financeiro', financeiro);
            saveData('meetings', meetings);
            saveData('chatMessages', chatMessages);
        }

        // Identification System
        function handleIdentification(e) {
            e.preventDefault();
            
            const userName = document.getElementById('userName').value.trim();
            
            if (userName.length >= 2) {
                // Generate user initials
                const initials = userName.split(' ')
                    .map(name => name.charAt(0).toUpperCase())
                    .join('')
                    .substring(0, 2);
                
                // Update current user
                currentUser = initials;
                
                // Update user profile in header
                const userAvatar = document.querySelector('.user-avatar');
                const userName_display = document.querySelector('.user-profile div div');
                
                if (userAvatar) userAvatar.textContent = initials;
                if (userName_display) userName_display.textContent = userName.toUpperCase();
                
                // Animate identification
                const loginBox = document.querySelector('.login-box');
                loginBox.style.transform = 'scale(0.95)';
                loginBox.style.opacity = '0.8';
                
                setTimeout(() => {
                    document.getElementById('identificationScreen').style.display = 'none';
                    document.getElementById('dashboard').classList.add('active');
                    showNotification(`‚úÖ Bem-vindo, ${userName}! Acesso liberado com sucesso! üéâ`, 'success');
                    
                    // Carregar dados salvos
                    loadAllData();
                    initializeSystem();
                    
                    // Salvar identifica√ß√£o do usu√°rio
                    localStorage.setItem('novatek_current_user', JSON.stringify({
                        name: userName,
                        initials: initials,
                        loginTime: new Date().toISOString()
                    }));
                }, 500);
            } else {
                showNotification('‚ùå Por favor, digite um nome v√°lido com pelo menos 2 caracteres!', 'error');
                
                // Shake animation for error
                const loginBox = document.querySelector('.login-box');
                loginBox.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    loginBox.style.animation = '';
                }, 500);
            }
        }

        // Navigation
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function() {
                const section = this.getAttribute('data-section');
                
                // Update active nav
                document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                this.classList.add('active');
                
                // Update active content
                document.querySelectorAll('.content-section').forEach(content => content.classList.remove('active'));
                document.getElementById('section-' + section).classList.add('active');
                
                // Update page title
                const titles = {
                    'dashboard': 'Dashboard',
                    'clientes': 'Clientes',
                    'propostas': 'Propostas',
                    'leads': 'Pipeline de Leads',
                    'agenda': 'Agenda & Reuni√µes',
                    'financeiro': 'Financeiro',
                    'contratos': 'Contratos',
                    'usuarios': 'Usu√°rios',
                    'relatorios': 'Relat√≥rios',
                    'configuracoes': 'Configura√ß√µes'
                };
                
                document.getElementById('pageTitle').textContent = titles[section];
            });
        });

        // Modal Functions - MELHORADAS
        function openModal(modalId) {
            const modal = document.getElementById(modalId);
            modal.classList.add('active');
            
            // Reset form if not editing
            if (!editingId) {
                const form = modal.querySelector('form');
                if (form) {
                    form.reset();
                    // Reset modal title to default
                    const titleMap = {
                        'clienteModal': 'üë§ Novo Cliente',
                        'propostaModal': 'üìù Nova Proposta',
                        'leadModal': 'üéØ Novo Lead',
                        'contratoModal': 'üìÑ Novo Contrato',
                        'reuniaoModal': 'üìÖ Nova Reuni√£o',
                        'financeiroModal': 'üí∞ Nova Movimenta√ß√£o',
                        'usuarioModal': 'üë§ Novo Usu√°rio'
                    };
                    
                    const titleElement = modal.querySelector('.modal-header h3');
                    if (titleElement && titleMap[modalId]) {
                        titleElement.textContent = titleMap[modalId];
                    }
                }
            }
            
            updateClientSelects();
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            editingId = null; // Reset editing state
        }

        // Close modal on outside click
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // Chat Functions
        const chatToggle = document.getElementById('chatToggle');
        const chatWindow = document.getElementById('chatWindow');
        const chatInput = document.getElementById('chatInput');
        const sendBtn = document.getElementById('sendBtn');

        chatToggle.addEventListener('click', () => {
            chatWindow.classList.toggle('active');
            if (chatWindow.classList.contains('active')) {
                chatInput.focus();
            }
        });

        function sendMessage() {
            const message = chatInput.value.trim();
            
            if (message) {
                const messageData = {
                    id: Date.now(),
                    text: message,
                    user: currentUser,
                    timestamp: new Date().toISOString(),
                    isOwn: true
                };

                addMessageToChat(messageData);
                chatInput.value = '';
                
                // Auto resize textarea
                chatInput.style.height = 'auto';
                
                // Simular resposta autom√°tica
                setTimeout(() => {
                    const responses = [
                        'Perfeito! üëç',
                        'Entendido! üìù',
                        'Vou verificar isso üîç',
                        '√ìtima ideia! üí°',
                        'J√° estou cuidando disso üöÄ'
                    ];
                    const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                    
                    const responseData = {
                        id: Date.now() + 1,
                        text: randomResponse,
                        user: 'CM',
                        timestamp: new Date().toISOString(),
                        isOwn: false
                    };
                    
                    addMessageToChat(responseData);
                }, 1000 + Math.random() * 2000);
            }
        }

        function addMessageToChat(messageData) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${messageData.isOwn ? 'own' : ''}`;
            
            const time = new Date(messageData.timestamp).toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Buscar foto do usu√°rio
            const usuario = usuarios.find(u => u.avatar === messageData.user || u.nome.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) === messageData.user);
            const avatarContent = usuario && usuario.foto ? 
                `<img src="${usuario.foto}" style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255, 255, 255, 0.1);">` :
                `<div class="message-avatar">${messageData.user}</div>`;
            
            messageDiv.innerHTML = `
                ${avatarContent}
                <div class="message-content">
                    <div class="message-bubble">${messageData.text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Salvar mensagem no localStorage para sincroniza√ß√£o
            chatMessages.push(messageData);
            saveData('chatMessages', chatMessages);
        }

        sendBtn.addEventListener('click', sendMessage);

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Auto resize textarea
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 100) + 'px';
        });

        // Form Handlers
        function saveCliente(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const cliente = {
                id: editingId || Date.now(),
                nome: formData.get('nome'),
                email: formData.get('email'),
                telefone: formData.get('telefone'),
                empresa: formData.get('empresa') || '',
                status: 'ativo'
            };
            
            if (editingId) {
                const index = clientes.findIndex(c => c.id === editingId);
                clientes[index] = cliente;
                showNotification('‚úÖ Cliente atualizado com sucesso!', 'success');
            } else {
                clientes.push(cliente);
                showNotification('‚úÖ Cliente salvo com sucesso!', 'success');
            }
            
            saveData('clientes', clientes);
            renderClientes();
            updateClientSelects();
            updateDashboard();
            closeModal('clienteModal');
            event.target.reset();
            editingId = null;
        }

        function saveProposta(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const proposta = {
                id: editingId || Date.now(),
                numero: editingId ? propostas.find(p => p.id === editingId).numero : `#2024-${String(propostas.length + 1).padStart(3, '0')}`,
                cliente: formData.get('cliente'),
                valor: parseFloat(formData.get('valor')),
                data: new Date().toLocaleDateString('pt-BR'),
                validade: formData.get('validade'),
                descricao: formData.get('descricao'),
                status: 'enviada'
            };
            
            if (editingId) {
                const index = propostas.findIndex(p => p.id === editingId);
                propostas[index] = proposta;
                showNotification('‚úÖ Proposta atualizada com sucesso!', 'success');
            } else {
                propostas.push(proposta);
                showNotification('‚úÖ Proposta salva com sucesso!', 'success');
            }
            
            saveData('propostas', propostas);
            renderPropostas();
            closeModal('propostaModal');
            event.target.reset();
            editingId = null;
        }

        function saveLead(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const lead = {
                id: editingId || Date.now(),
                empresa: formData.get('empresa'),
                valor: parseFloat(formData.get('valor')),
                estagio: formData.get('estagio'),
                contato: formData.get('contato'),
                telefone: formData.get('telefone') || '',
                data: new Date().toLocaleDateString('pt-BR')
            };
            
            if (editingId) {
                const index = leads.findIndex(l => l.id === editingId);
                leads[index] = lead;
                showNotification('‚úÖ Lead atualizado com sucesso!', 'success');
            } else {
                leads.push(lead);
                showNotification('‚úÖ Lead salvo com sucesso!', 'success');
            }
            
            saveData('leads', leads);
            renderLeads();
            closeModal('leadModal');
            event.target.reset();
            editingId = null;
        }

        function saveContrato(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const contrato = {
                id: editingId || Date.now(),
                numero: editingId ? contratos.find(c => c.id === editingId).numero : `CT-2024-${String(contratos.length + 1).padStart(3, '0')}`,
                cliente: formData.get('cliente'),
                valor: parseFloat(formData.get('valor')),
                vigencia: parseInt(formData.get('vigencia')),
                dataInicio: new Date().toLocaleDateString('pt-BR'),
                objeto: formData.get('objeto'),
                status: 'ativo'
            };
            
            if (editingId) {
                const index = contratos.findIndex(c => c.id === editingId);
                contratos[index] = contrato;
                showNotification('‚úÖ Contrato atualizado com sucesso!', 'success');
            } else {
                contratos.push(contrato);
                showNotification('‚úÖ Contrato salvo com sucesso!', 'success');
            }
            
            saveData('contratos', contratos);
            renderContratos();
            closeModal('contratoModal');
            event.target.reset();
            editingId = null;
        }

        function saveUsuario(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const usuario = {
                id: editingId || Date.now(),
                nome: formData.get('nome'),
                email: formData.get('email'),
                cargo: formData.get('cargo'),
                permissao: formData.get('permissao'),
                status: 'ativo',
                avatar: formData.get('nome').split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2),
                foto: null
            };
            
            // Processar foto se foi enviada
            const fotoInput = event.target.querySelector('input[name="foto"]');
            if (fotoInput && fotoInput.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    usuario.foto = e.target.result;
                    salvarUsuarioFinal(usuario);
                };
                reader.readAsDataURL(fotoInput.files[0]);
            } else {
                salvarUsuarioFinal(usuario);
            }
        }
        
            if (editingId) {
                const index = usuarios.findIndex(u => u.id === editingId);
                usuarios[index] = usuario;
                showNotification('‚úÖ Usu√°rio atualizado com sucesso!', 'success');
            } else {
                usuarios.push(usuario);
                showNotification('‚úÖ Usu√°rio salvo com sucesso!', 'success');
            }
            
            saveData('usuarios', usuarios);
            renderUsuarios();
            closeModal('usuarioModal');
            document.getElementById('usuarioModal').querySelector('form').reset();
            editingId = null;
        }

        function saveFinanceiro(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const movimentacao = {
                id: editingId || Date.now(),
                data: new Date(formData.get('data')).toLocaleDateString('pt-BR'),
                descricao: formData.get('descricao'),
                categoria: formData.get('categoria'),
                tipo: formData.get('tipo'),
                valor: parseFloat(formData.get('valor')),
                status: 'confirmado'
            };
            
            if (editingId) {
                const index = financeiro.findIndex(f => f.id === editingId);
                financeiro[index] = movimentacao;
                showNotification('‚úÖ Movimenta√ß√£o atualizada com sucesso!', 'success');
            } else {
                financeiro.push(movimentacao);
                showNotification('‚úÖ Movimenta√ß√£o salva com sucesso!', 'success');
            }
            
            saveData('financeiro', financeiro);
            renderFinanceiro();
            updateDashboard();
            closeModal('financeiroModal');
            event.target.reset();
            editingId = null;
        }

        function saveReuniao(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const reuniao = {
                id: editingId || Date.now(),
                titulo: formData.get('titulo'),
                data: formData.get('data'),
                hora: formData.get('hora'),
                participantes: formData.get('participantes') || ''
            };
            
            if (editingId) {
                const index = meetings.findIndex(m => m.id === editingId);
                meetings[index] = reuniao;
                showNotification('‚úÖ Reuni√£o atualizada com sucesso!', 'success');
            } else {
                meetings.push(reuniao);
                showNotification('‚úÖ Reuni√£o agendada com sucesso!', 'success');
            }
            
            saveData('meetings', meetings);
            renderReunioes();
            closeModal('reuniaoModal');
            event.target.reset();
            editingId = null;
        }

        // Render Functions
        function renderClientes() {
            const tbody = document.getElementById('clientesTableBody');
            if (!tbody) return;
            
            if (clientes.length === 0) {
                tbody.innerHTML = `
                    <tr class="empty-state">
                        <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üë•</div>
                            <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhum cliente cadastrado</div>
                            <div style="font-size: 0.875rem;">Clique em "Novo Cliente" para come√ßar</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = clientes.map(cliente => `
                <tr>
                    <td><strong>${cliente.nome}</strong></td>
                    <td>${cliente.email}</td>
                    <td>${cliente.telefone}</td>
                    <td>${cliente.empresa || '-'}</td>
                    <td><span class="status-badge success">Ativo</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editCliente(${cliente.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon" onclick="viewCliente(${cliente.id})" title="Visualizar">üëÅÔ∏è</button>
                            <button class="btn-icon danger" onclick="deleteCliente(${cliente.id})" title="Excluir">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderPropostas() {
            const tbody = document.getElementById('propostasTableBody');
            if (!tbody) return;
            
            if (propostas.length === 0) {
                tbody.innerHTML = `
                    <tr class="empty-state">
                        <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üìù</div>
                            <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhuma proposta criada</div>
                            <div style="font-size: 0.875rem;">Clique em "Nova Proposta" para come√ßar</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = propostas.map(proposta => `
                <tr>
                    <td><strong>${proposta.numero}</strong></td>
                    <td>${getClienteNome(proposta.cliente)}</td>
                    <td style="color: #06b6d4; font-weight: 700;">R$ ${proposta.valor.toLocaleString('pt-BR')}</td>
                    <td>${proposta.data}</td>
                    <td>${new Date(proposta.validade).toLocaleDateString('pt-BR')}</td>
                    <td><span class="status-badge success">Enviada</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editProposta(${proposta.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon danger" onclick="deleteProposta(${proposta.id})" title="Excluir">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderContratos() {
            const tbody = document.getElementById('contratosTableBody');
            if (!tbody) return;
            
            if (contratos.length === 0) {
                tbody.innerHTML = `
                    <tr class="empty-state">
                        <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üìÑ</div>
                            <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhum contrato cadastrado</div>
                            <div style="font-size: 0.875rem;">Clique em "Novo Contrato" para come√ßar</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = contratos.map(contrato => `
                <tr>
                    <td><strong>${contrato.numero}</strong></td>
                    <td>${getClienteNome(contrato.cliente)}</td>
                    <td style="color: #06b6d4; font-weight: 700;">R$ ${contrato.valor.toLocaleString('pt-BR')}</td>
                    <td>${contrato.dataInicio}</td>
                    <td>${contrato.vigencia} meses</td>
                    <td><span class="status-badge success">Ativo</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editContrato(${contrato.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon danger" onclick="deleteContrato(${contrato.id})" title="Excluir">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderUsuarios() {
            const tbody = document.getElementById('usuariosTableBody');
            if (!tbody) return;
            
            if (usuarios.length === 0) {
                tbody.innerHTML = `
                    <tr class="empty-state">
                        <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üë§</div>
                            <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhum usu√°rio cadastrado</div>
                            <div style="font-size: 0.875rem;">Clique em "Novo Usu√°rio" para come√ßar</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = usuarios.map(usuario => `
                <tr>
                    <td>
                        ${usuario.foto ? 
                            `<img src="${usuario.foto}" style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover; border: 2px solid #3b82f6;">` :
                            `<div class="user-avatar" style="width: 40px; height: 40px; font-size: 0.875rem;">${usuario.avatar}</div>`
                        }
                    </td>
                    <td><strong>${usuario.nome}</strong></td>
                    <td>${usuario.email}</td>
                    <td>${usuario.cargo}</td>
                    <td><span class="status-badge ${usuario.permissao === 'admin' ? 'danger' : usuario.permissao === 'gerente' ? 'warning' : 'success'}">${usuario.permissao.charAt(0).toUpperCase() + usuario.permissao.slice(1)}</span></td>
                    <td><span class="status-badge success">Ativo</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editUsuario(${usuario.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon" onclick="viewUsuario(${usuario.id})" title="Visualizar">üëÅÔ∏è</button>
                            ${usuario.id !== 1 ? `<button class="btn-icon danger" onclick="deleteUsuario(${usuario.id})" title="Excluir">üóëÔ∏è</button>` : ''}
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderFinanceiro() {
            const tbody = document.getElementById('financeiroTableBody');
            if (!tbody) return;
            
            if (financeiro.length === 0) {
                tbody.innerHTML = `
                    <tr class="empty-state">
                        <td colspan="7" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üí∞</div>
                            <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhuma movimenta√ß√£o registrada</div>
                            <div style="font-size: 0.875rem;">Clique em "Nova Movimenta√ß√£o" para come√ßar</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = financeiro.map(item => `
                <tr>
                    <td>${item.data}</td>
                    <td>${item.descricao}</td>
                    <td>${item.categoria}</td>
                    <td><span style="color: ${item.tipo === 'receita' ? '#06b6d4' : '#f43f5e'};">${item.tipo === 'receita' ? 'üí∞ Receita' : 'üí∏ Despesa'}</span></td>
                    <td style="color: ${item.tipo === 'receita' ? '#06b6d4' : '#f43f5e'}; font-weight: 700;">${item.tipo === 'receita' ? '+' : '-'} R$ ${item.valor.toLocaleString('pt-BR')}</td>
                    <td><span class="status-badge success">Confirmado</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editFinanceiro(${item.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon danger" onclick="deleteFinanceiro(${item.id})" title="Excluir">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function renderLeads() {
            // Update Kanban columns
            const columns = {
                'novos': document.querySelector('.kanban-column:nth-child(1)'),
                'contato': document.querySelector('.kanban-column:nth-child(2)'),
                'proposta': document.querySelector('.kanban-column:nth-child(3)'),
                'fechado': document.querySelector('.kanban-column:nth-child(4)')
            };
            
            Object.keys(columns).forEach(stage => {
                const column = columns[stage];
                if (!column) return;
                
                const stageLeads = leads.filter(lead => lead.estagio === stage);
                const count = column.querySelector('.kanban-count');
                if (count) count.textContent = stageLeads.length;
                
                // Clear existing cards
                const existingCards = column.querySelectorAll('.kanban-card');
                existingCards.forEach(card => card.remove());
                
                if (stageLeads.length === 0) {
                    let emptyDiv = column.querySelector('.empty-kanban');
                    if (!emptyDiv) {
                        emptyDiv = document.createElement('div');
                        emptyDiv.className = 'empty-kanban';
                        emptyDiv.innerHTML = `
                            <div style="text-align: center; padding: 2rem; color: #64748b;">
                                <div style="font-size: 2rem; margin-bottom: 0.5rem;">üéØ</div>
                                <div style="font-size: 0.875rem;">Nenhum lead neste est√°gio</div>
                            </div>
                        `;
                        column.appendChild(emptyDiv);
                    }
                } else {
                    // Remove empty state
                    const emptyDiv = column.querySelector('.empty-kanban');
                    if (emptyDiv) emptyDiv.remove();
                    
                    // Add cards
                    stageLeads.forEach(lead => {
                        const cardDiv = document.createElement('div');
                        cardDiv.className = 'kanban-card';
                        cardDiv.innerHTML = `
                            <div class="kanban-card-title">${lead.empresa}</div>
                            <div class="kanban-card-meta">
                                <span>R$ ${lead.valor.toLocaleString('pt-BR')}</span>
                                <span>${lead.contato}</span>
                            </div>
                            <div style="margin-top: 0.5rem; display: flex; gap: 0.25rem;">
                                <button class="btn-icon" onclick="editLead(${lead.id})" title="Editar" style="font-size: 0.7rem; padding: 0.25rem;">‚úèÔ∏è</button>
                                <button class="btn-icon danger" onclick="deleteLead(${lead.id})" title="Excluir" style="font-size: 0.7rem; padding: 0.25rem;">üóëÔ∏è</button>
                            </div>
                        `;
                        column.appendChild(cardDiv);
                    });
                }
            });
        }

        function renderReunioes() {
            const tbody = document.getElementById('reunioesTableBody');
            if (!tbody) return;
            
            if (meetings.length === 0) {
                tbody.innerHTML = `
                    <tr class="empty-state">
                        <td colspan="6" style="text-align: center; padding: 3rem; color: #64748b;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üìÖ</div>
                            <div style="font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem;">Nenhuma reuni√£o agendada</div>
                            <div style="font-size: 0.875rem;">Clique em "Nova Reuni√£o" para agendar</div>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = meetings.map(meeting => `
                <tr>
                    <td>${new Date(meeting.data).toLocaleDateString('pt-BR')} ${meeting.hora}</td>
                    <td><strong>${meeting.titulo}</strong></td>
                    <td>${meeting.participantes || '-'}</td>
                    <td>-</td>
                    <td><span class="status-badge success">Agendada</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editReuniao(${meeting.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon danger" onclick="deleteReuniao(${meeting.id})" title="Excluir">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Action Functions - TODAS FUNCIONAIS
        function editCliente(id) {
            const cliente = clientes.find(c => c.id === id);
            if (!cliente) return;
            
            editingId = id;
            const modal = document.getElementById('clienteModal');
            const form = modal.querySelector('form');
            
            // Preencher formul√°rio
            form.nome.value = cliente.nome;
            form.email.value = cliente.email;
            form.telefone.value = cliente.telefone;
            form.empresa.value = cliente.empresa || '';
            
            // Alterar t√≠tulo do modal
            modal.querySelector('.modal-header h3').textContent = '‚úèÔ∏è Editar Cliente';
            
            openModal('clienteModal');
            showNotification('üìù Editando cliente...', 'info');
        }

        function viewCliente(id) {
            const cliente = clientes.find(c => c.id === id);
            if (cliente) {
                const detalhes = `
                    üìã DETALHES DO CLIENTE
                    
                    üë§ Nome: ${cliente.nome}
                    üìß Email: ${cliente.email}
                    üì± Telefone: ${cliente.telefone}
                    üè¢ Empresa: ${cliente.empresa || 'N√£o informado'}
                    üìÖ Cadastrado em: ${new Date().toLocaleDateString('pt-BR')}
                    ‚úÖ Status: Ativo
                `;
                
                showCustomModal('üëÅÔ∏è Visualizar Cliente', detalhes);
            }
        }

        function deleteCliente(id) {
            const cliente = clientes.find(c => c.id === id);
            if (!cliente) return;
            
            showConfirmModal(
                'üóëÔ∏è Excluir Cliente',
                `Tem certeza que deseja excluir permanentemente o cliente "${cliente.nome}"?`,
                () => {
                    clientes = clientes.filter(c => c.id !== id);
                    saveData('clientes', clientes);
                    renderClientes();
                    updateClientSelects();
                    updateDashboard();
                    showNotification('üóëÔ∏è Cliente exclu√≠do com sucesso!', 'success');
                }
            );
        }

        function editProposta(id) {
            const proposta = propostas.find(p => p.id === id);
            if (!proposta) return;
            
            editingId = id;
            const modal = document.getElementById('propostaModal');
            const form = modal.querySelector('form');
            
            // Preencher formul√°rio
            form.cliente.value = proposta.cliente;
            form.valor.value = proposta.valor;
            form.validade.value = proposta.validade;
            form.descricao.value = proposta.descricao;
            
            // Alterar t√≠tulo do modal
            modal.querySelector('.modal-header h3').textContent = '‚úèÔ∏è Editar Proposta';
            
            openModal('propostaModal');
            showNotification('üìù Editando proposta...', 'info');
        }

        function deleteProposta(id) {
            const proposta = propostas.find(p => p.id === id);
            if (!proposta) return;
            
            showConfirmModal(
                'üóëÔ∏è Excluir Proposta',
                `Tem certeza que deseja excluir a proposta "${proposta.numero}"?`,
                () => {
                    propostas = propostas.filter(p => p.id !== id);
                    saveData('propostas', propostas);
                    renderPropostas();
                    showNotification('üóëÔ∏è Proposta exclu√≠da com sucesso!', 'success');
                }
            );
        }

        function editContrato(id) {
            const contrato = contratos.find(c => c.id === id);
            if (!contrato) return;
            
            editingId = id;
            const modal = document.getElementById('contratoModal');
            const form = modal.querySelector('form');
            
            // Preencher formul√°rio
            form.cliente.value = contrato.cliente;
            form.valor.value = contrato.valor;
            form.vigencia.value = contrato.vigencia;
            form.objeto.value = contrato.objeto;
            
            // Alterar t√≠tulo do modal
            modal.querySelector('.modal-header h3').textContent = '‚úèÔ∏è Editar Contrato';
            
            openModal('contratoModal');
            showNotification('üìù Editando contrato...', 'info');
        }

        function deleteContrato(id) {
            const contrato = contratos.find(c => c.id === id);
            if (!contrato) return;
            
            showConfirmModal(
                'üóëÔ∏è Excluir Contrato',
                `Tem certeza que deseja excluir o contrato "${contrato.numero}"?`,
                () => {
                    contratos = contratos.filter(c => c.id !== id);
                    saveData('contratos', contratos);
                    renderContratos();
                    showNotification('üóëÔ∏è Contrato exclu√≠do com sucesso!', 'success');
                }
            );
        }

        function editUsuario(id) {
            const usuario = usuarios.find(u => u.id === id);
            if (!usuario) return;
            
            editingId = id;
            const modal = document.getElementById('usuarioModal');
            const form = modal.querySelector('form');
            
            // Preencher formul√°rio
            form.nome.value = usuario.nome;
            form.email.value = usuario.email;
            form.cargo.value = usuario.cargo;
            form.permissao.value = usuario.permissao;
            
            // Mostrar foto atual se existir
            if (usuario.foto) {
                const preview = document.getElementById('fotoPreview');
                const img = document.getElementById('previewImg');
                img.src = usuario.foto;
                preview.style.display = 'block';
            }
            
            // Alterar t√≠tulo do modal
            modal.querySelector('.modal-header h3').textContent = '‚úèÔ∏è Editar Usu√°rio';
            
            openModal('usuarioModal');
            showNotification('üìù Editando usu√°rio...', 'info');
        }

        function viewUsuario(id) {
            const usuario = usuarios.find(u => u.id === id);
            if (usuario) {
                const detalhes = `
                    üìã DETALHES DO USU√ÅRIO
                    
                    üë§ Nome: ${usuario.nome}
                    üìß Email: ${usuario.email}
                    üíº Cargo: ${usuario.cargo}
                    üîê Permiss√£o: ${usuario.permissao.charAt(0).toUpperCase() + usuario.permissao.slice(1)}
                    ‚úÖ Status: ${usuario.status.charAt(0).toUpperCase() + usuario.status.slice(1)}
                `;
                
                showCustomModal('üëÅÔ∏è Visualizar Usu√°rio', detalhes);
            }
        }

        function deleteUsuario(id) {
            if (id === 1) {
                showNotification('‚ùå N√£o √© poss√≠vel excluir o administrador principal!', 'error');
                return;
            }
            
            const usuario = usuarios.find(u => u.id === id);
            if (!usuario) return;
            
            showConfirmModal(
                'üóëÔ∏è Excluir Usu√°rio',
                `Tem certeza que deseja excluir o usu√°rio "${usuario.nome}"?`,
                () => {
                    usuarios = usuarios.filter(u => u.id !== id);
                    saveData('usuarios', usuarios);
                    renderUsuarios();
                    showNotification('üóëÔ∏è Usu√°rio exclu√≠do com sucesso!', 'success');
                }
            );
        }

        function editFinanceiro(id) {
            const item = financeiro.find(f => f.id === id);
            if (!item) return;
            
            editingId = id;
            const modal = document.getElementById('financeiroModal');
            const form = modal.querySelector('form');
            
            // Converter data para formato do input
            const dateParts = item.data.split('/');
            const dateForInput = `${dateParts[2]}-${dateParts[1].padStart(2, '0')}-${dateParts[0].padStart(2, '0')}`;
            
            // Preencher formul√°rio
            form.data.value = dateForInput;
            form.descricao.value = item.descricao;
            form.categoria.value = item.categoria;
            form.tipo.value = item.tipo;
            form.valor.value = item.valor;
            
            // Alterar t√≠tulo do modal
            modal.querySelector('.modal-header h3').textContent = '‚úèÔ∏è Editar Movimenta√ß√£o';
            
            openModal('financeiroModal');
            showNotification('üìù Editando movimenta√ß√£o...', 'info');
        }

        function deleteFinanceiro(id) {
            const item = financeiro.find(f => f.id === id);
            if (!item) return;
            
            showConfirmModal(
                'üóëÔ∏è Excluir Movimenta√ß√£o',
                `Tem certeza que deseja excluir a movimenta√ß√£o "${item.descricao}"?`,
                () => {
                    financeiro = financeiro.filter(f => f.id !== id);
                    saveData('financeiro', financeiro);
                    renderFinanceiro();
                    updateDashboard();
                    showNotification('üóëÔ∏è Movimenta√ß√£o exclu√≠da com sucesso!', 'success');
                }
            );
        }

        function editLead(id) {
            const lead = leads.find(l => l.id === id);
            if (!lead) return;
            
            editingId = id;
            const modal = document.getElementById('leadModal');
            const form = modal.querySelector('form');
            
            // Preencher formul√°rio
            form.empresa.value = lead.empresa;
            form.valor.value = lead.valor;
            form.estagio.value = lead.estagio;
            form.contato.value = lead.contato;
            form.telefone.value = lead.telefone;
            
            // Alterar t√≠tulo do modal
            modal.querySelector('.modal-header h3').textContent = '‚úèÔ∏è Editar Lead';
            
            openModal('leadModal');
            showNotification('üìù Editando lead...', 'info');
        }

        function deleteLead(id) {
            const lead = leads.find(l => l.id === id);
            if (!lead) return;
            
            showConfirmModal(
                'üóëÔ∏è Excluir Lead',
                `Tem certeza que deseja excluir o lead "${lead.empresa}"?`,
                () => {
                    leads = leads.filter(l => l.id !== id);
                    saveData('leads', leads);
                    renderLeads();
                    showNotification('üóëÔ∏è Lead exclu√≠do com sucesso!', 'success');
                }
            );
        }

        function editReuniao(id) {
            const reuniao = meetings.find(m => m.id === id);
            if (!reuniao) return;
            
            editingId = id;
            const modal = document.getElementById('reuniaoModal');
            const form = modal.querySelector('form');
            
            // Preencher formul√°rio
            form.titulo.value = reuniao.titulo;
            form.data.value = reuniao.data;
            form.hora.value = reuniao.hora;
            form.participantes.value = reuniao.participantes;
            
            // Alterar t√≠tulo do modal
            modal.querySelector('.modal-header h3').textContent = '‚úèÔ∏è Editar Reuni√£o';
            
            openModal('reuniaoModal');
            showNotification('üìù Editando reuni√£o...', 'info');
        }

        function deleteReuniao(id) {
            const reuniao = meetings.find(m => m.id === id);
            if (!reuniao) return;
            
            showConfirmModal(
                'üóëÔ∏è Excluir Reuni√£o',
                `Tem certeza que deseja excluir a reuni√£o "${reuniao.titulo}"?`,
                () => {
                    meetings = meetings.filter(m => m.id !== id);
                    saveData('meetings', meetings);
                    renderReunioes();
                    showNotification('üóëÔ∏è Reuni√£o exclu√≠da com sucesso!', 'success');
                }
            );
        }

        function saveConfiguracoes() {
            showNotification('‚úÖ Configura√ß√µes salvas com sucesso!', 'success');
        }

        // Helper Functions
        function getClienteNome(clienteId) {
            const cliente = clientes.find(c => c.id == clienteId);
            return cliente ? cliente.nome : 'Cliente n√£o encontrado';
        }

        function updateDashboard() {
            const receitas = financeiro.filter(f => f.tipo === 'receita').reduce((sum, f) => sum + f.valor, 0);
            const despesas = financeiro.filter(f => f.tipo === 'despesa').reduce((sum, f) => sum + f.valor, 0);
            const lucro = receitas - despesas;
            
            // Update dashboard cards with real data
            const totalReceitasEl = document.getElementById('totalReceitas');
            const totalDespesasEl = document.getElementById('totalDespesas');
            const lucroLiquidoEl = document.getElementById('lucroLiquido');
            const totalClientesEl = document.getElementById('totalClientes');
            const reportClientesEl = document.getElementById('reportClientes');
            
            // Update financeiro section cards
            const totalReceitasFinanceiroEl = document.getElementById('totalReceitasFinanceiro');
            const totalDespesasFinanceiroEl = document.getElementById('totalDespesasFinanceiro');
            const saldoAtualEl = document.getElementById('saldoAtual');
            const totalMovimentacoesEl = document.getElementById('totalMovimentacoes');
            
            if (totalReceitasEl) totalReceitasEl.textContent = `R$ ${receitas.toLocaleString('pt-BR')}`;
            if (totalDespesasEl) totalDespesasEl.textContent = `R$ ${despesas.toLocaleString('pt-BR')}`;
            if (lucroLiquidoEl) lucroLiquidoEl.textContent = `R$ ${lucro.toLocaleString('pt-BR')}`;
            if (totalClientesEl) totalClientesEl.textContent = clientes.length.toString();
            if (reportClientesEl) reportClientesEl.textContent = `${clientes.length} Ativos`;
            
            // Update financeiro section
            if (totalReceitasFinanceiroEl) totalReceitasFinanceiroEl.textContent = `R$ ${receitas.toLocaleString('pt-BR')}`;
            if (totalDespesasFinanceiroEl) totalDespesasFinanceiroEl.textContent = `R$ ${despesas.toLocaleString('pt-BR')}`;
            if (saldoAtualEl) saldoAtualEl.textContent = `R$ ${lucro.toLocaleString('pt-BR')}`;
            if (totalMovimentacoesEl) totalMovimentacoesEl.textContent = financeiro.length.toString();
        }

        // Modal System - FUNCIONAL
        function showCustomModal(title, content) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>${title}</h3>
                        <button class="close-modal" onclick="this.closest('.modal').remove()">√ó</button>
                    </div>
                    <div style="white-space: pre-line; line-height: 1.6; color: #e0e7ff; padding: 1rem 0;">
                        ${content}
                    </div>
                    <button class="btn-primary" onclick="this.closest('.modal').remove()" style="margin-top: 1rem;">
                        ‚úÖ Fechar
                    </button>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Fechar ao clicar fora
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.remove();
                }
            });
        }

        function showConfirmModal(title, message, onConfirm) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 450px;">
                    <div class="modal-header">
                        <h3>${title}</h3>
                        <button class="close-modal" onclick="this.closest('.modal').remove()">√ó</button>
                    </div>
                    <div style="color: #e0e7ff; padding: 1rem 0; line-height: 1.6;">
                        ${message}
                    </div>
                    <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                        <button class="btn-secondary" onclick="this.closest('.modal').remove()" style="flex: 1;">
                            ‚ùå Cancelar
                        </button>
                        <button class="btn-primary" onclick="confirmAction()" style="flex: 1; background: linear-gradient(135deg, #f43f5e, #dc2626);">
                            ‚úÖ Confirmar
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            // Fun√ß√£o para confirmar a√ß√£o
            window.confirmAction = function() {
                onConfirm();
                modal.remove();
                delete window.confirmAction;
            };
            
            // Fechar ao clicar fora
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.remove();
                    delete window.confirmAction;
                }
            });
        }

        // Export Functions - FUNCIONAIS
        function exportData(section) {
            showNotification('üìä Preparando exporta√ß√£o...', 'info');
            
            let data = [];
            let filename = '';
            
            switch(section) {
                case 'clientes':
                    data = clientes;
                    filename = 'clientes_novatek.json';
                    break;
                case 'financeiro':
                    data = financeiro;
                    filename = 'financeiro_novatek.json';
                    break;
                case 'propostas':
                    data = propostas;
                    filename = 'propostas_novatek.json';
                    break;
                case 'contratos':
                    data = contratos;
                    filename = 'contratos_novatek.json';
                    break;
                case 'usuarios':
                    data = usuarios;
                    filename = 'usuarios_novatek.json';
                    break;
                case 'agenda':
                    data = meetings;
                    filename = 'agenda_novatek.json';
                    break;
                default:
                    data = { clientes, financeiro, propostas, contratos, usuarios, meetings };
                    filename = 'backup_completo_novatek.json';
            }
            
            // Criar e baixar arquivo
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            URL.revokeObjectURL(url);
            
            setTimeout(() => {
                showNotification('‚úÖ Dados exportados com sucesso!', 'success');
            }, 1000);
        }

        // Report Generation - FUNCIONAL
        function generateReport(type) {
            showNotification('üìä Gerando relat√≥rio...', 'info');
            
            let reportContent = '';
            const currentDate = new Date().toLocaleDateString('pt-BR');
            
            switch(type) {
                case 'mensal':
                    const receitas = financeiro.filter(f => f.tipo === 'receita').reduce((sum, f) => sum + f.valor, 0);
                    const despesas = financeiro.filter(f => f.tipo === 'despesa').reduce((sum, f) => sum + f.valor, 0);
                    const lucro = receitas - despesas;
                    
                    reportContent = `
                        üìä RELAT√ìRIO MENSAL - JANEIRO 2024
                        Gerado em: ${currentDate}
                        
                        üí∞ RESUMO FINANCEIRO:
                        ‚Ä¢ Receitas: R$ ${receitas.toLocaleString('pt-BR')}
                        ‚Ä¢ Despesas: R$ ${despesas.toLocaleString('pt-BR')}
                        ‚Ä¢ Lucro L√≠quido: R$ ${lucro.toLocaleString('pt-BR')}
                        
                        üë• CLIENTES:
                        ‚Ä¢ Total de Clientes: ${clientes.length}
                        ‚Ä¢ Clientes Ativos: ${clientes.filter(c => c.status === 'ativo').length}
                        
                        üìã PROPOSTAS:
                        ‚Ä¢ Total de Propostas: ${propostas.length}
                        ‚Ä¢ Valor Total: R$ ${propostas.reduce((sum, p) => sum + p.valor, 0).toLocaleString('pt-BR')}
                        
                        üìÑ CONTRATOS:
                        ‚Ä¢ Contratos Ativos: ${contratos.length}
                        ‚Ä¢ Valor Total: R$ ${contratos.reduce((sum, c) => sum + c.valor, 0).toLocaleString('pt-BR')}
                    `;
                    break;
                    
                case 'anual':
                    reportContent = `
                        üìà RELAT√ìRIO ANUAL - 2024
                        Gerado em: ${currentDate}
                        
                        üéØ PERFORMANCE GERAL:
                        ‚Ä¢ Sistema implementado com sucesso
                        ‚Ä¢ Base de dados estruturada
                        ‚Ä¢ Processos automatizados
                        
                        üìä ESTAT√çSTICAS:
                        ‚Ä¢ Clientes Cadastrados: ${clientes.length}
                        ‚Ä¢ Movimenta√ß√µes Financeiras: ${financeiro.length}
                        ‚Ä¢ Propostas Geradas: ${propostas.length}
                        ‚Ä¢ Contratos Firmados: ${contratos.length}
                        ‚Ä¢ Usu√°rios do Sistema: ${usuarios.length}
                        
                        ‚úÖ SISTEMA NOVATEK OPERACIONAL
                    `;
                    break;
                    
                case 'clientes':
                    reportContent = `
                        üë• RELAT√ìRIO DE CLIENTES
                        Gerado em: ${currentDate}
                        
                        üìä RESUMO:
                        ‚Ä¢ Total de Clientes: ${clientes.length}
                        ‚Ä¢ Clientes Ativos: ${clientes.filter(c => c.status === 'ativo').length}
                        
                        üìã LISTA DE CLIENTES:
                        ${clientes.map((c, i) => `
                        ${i + 1}. ${c.nome}
                           üìß ${c.email}
                           üì± ${c.telefone}
                           üè¢ ${c.empresa || 'N√£o informado'}
                        `).join('')}
                    `;
                    break;
                    
                case 'financeiro':
                    const totalReceitas = financeiro.filter(f => f.tipo === 'receita').reduce((sum, f) => sum + f.valor, 0);
                    const totalDespesas = financeiro.filter(f => f.tipo === 'despesa').reduce((sum, f) => sum + f.valor, 0);
                    
                    reportContent = `
                        üí∞ RELAT√ìRIO FINANCEIRO COMPLETO
                        Gerado em: ${currentDate}
                        
                        üìä RESUMO GERAL:
                        ‚Ä¢ Total de Receitas: R$ ${totalReceitas.toLocaleString('pt-BR')}
                        ‚Ä¢ Total de Despesas: R$ ${totalDespesas.toLocaleString('pt-BR')}
                        ‚Ä¢ Saldo Final: R$ ${(totalReceitas - totalDespesas).toLocaleString('pt-BR')}
                        ‚Ä¢ Total de Movimenta√ß√µes: ${financeiro.length}
                        
                        üìã MOVIMENTA√á√ïES RECENTES:
                        ${financeiro.slice(-10).map(f => `
                        ‚Ä¢ ${f.data} - ${f.descricao}
                          ${f.tipo === 'receita' ? 'üí∞' : 'üí∏'} ${f.tipo.toUpperCase()}: R$ ${f.valor.toLocaleString('pt-BR')}
                        `).join('')}
                    `;
                    break;
            }
            
            setTimeout(() => {
                showCustomModal(`üìä Relat√≥rio ${type.charAt(0).toUpperCase() + type.slice(1)}`, reportContent);
                showNotification('‚úÖ Relat√≥rio gerado com sucesso!', 'success');
            }, 1500);
        }

        // Print Function - FUNCIONAL
        function printReport() {
            window.print();
            showNotification('üñ®Ô∏è Enviando para impress√£o...', 'info');
        }

        // Notification System
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 1rem 1.5rem;
                background: ${type === 'success' ? 'rgba(6, 182, 212, 0.9)' : type === 'error' ? 'rgba(244, 63, 94, 0.9)' : 'rgba(59, 130, 246, 0.9)'};
                color: white;
                border-radius: 12px;
                font-weight: 600;
                z-index: 10000;
                backdrop-filter: blur(10px);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
                animation: slideIn 0.3s ease-out;
                max-width: 400px;
            `;
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-out forwards';
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // Add CSS for notification animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // Initialize System
        function initializeSystem() {
            renderUsuarios();
            renderFinanceiro();
            renderClientes();
            renderPropostas();
            renderContratos();
            renderLeads();
            renderReunioes();
            updateDashboard();
            updateClientSelects();
        }

        function updateClientSelects() {
            const selects = document.querySelectorAll('#propostaModal select[name="cliente"], #contratoModal select[name="cliente"]');
            selects.forEach(select => {
                const currentValue = select.value;
                select.innerHTML = '<option value="">Selecione um cliente</option>' +
                    clientes.map(cliente => `<option value="${cliente.id}">${cliente.nome}</option>`).join('');
                if (currentValue) select.value = currentValue;
            });
        }

        // Search Functions
        document.getElementById('clienteSearch')?.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const table = document.getElementById('clientesTable');
            const rows = table.querySelectorAll('tbody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        });

        // Sistema de √Åudio
        let mediaRecorder;
        let audioChunks = [];
        let isRecording = false;

        function toggleAudioRecording() {
            if (!isRecording) {
                startRecording();
            } else {
                stopRecording();
            }
        }

        async function startRecording() {
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                mediaRecorder = new MediaRecorder(stream);
                audioChunks = [];
                
                mediaRecorder.ondataavailable = (event) => {
                    audioChunks.push(event.data);
                };
                
                mediaRecorder.onstop = () => {
                    const audioBlob = new Blob(audioChunks, { type: 'audio/wav' });
                    const audioUrl = URL.createObjectURL(audioBlob);
                    sendAudioMessage(audioUrl);
                    
                    // Parar todas as tracks do stream
                    stream.getTracks().forEach(track => track.stop());
                };
                
                mediaRecorder.start();
                isRecording = true;
                
                const audioBtn = document.getElementById('audioBtn');
                audioBtn.innerHTML = '‚èπÔ∏è';
                audioBtn.title = 'Parar Grava√ß√£o';
                audioBtn.style.background = 'linear-gradient(135deg, #f43f5e, #dc2626)';
                
                showNotification('üé§ Gravando √°udio...', 'info');
                
            } catch (error) {
                console.error('Erro ao acessar microfone:', error);
                showNotification('‚ùå Erro ao acessar microfone. Verifique as permiss√µes.', 'error');
            }
        }

        function stopRecording() {
            if (mediaRecorder && isRecording) {
                mediaRecorder.stop();
                isRecording = false;
                
                const audioBtn = document.getElementById('audioBtn');
                audioBtn.innerHTML = 'üé§';
                audioBtn.title = 'Gravar √Åudio';
                audioBtn.style.background = 'linear-gradient(135deg, #3b82f6, #8b5cf6)';
                
                showNotification('‚úÖ √Åudio gravado com sucesso!', 'success');
            }
        }

        function sendAudioMessage(audioUrl) {
            const messageData = {
                id: Date.now(),
                text: 'üéµ Mensagem de √°udio',
                audioUrl: audioUrl,
                user: currentUser,
                timestamp: new Date().toISOString(),
                isOwn: true,
                type: 'audio'
            };

            addAudioMessageToChat(messageData);
            
            // Simular resposta autom√°tica
            setTimeout(() => {
                const responses = [
                    'Ouvi sua mensagem! üëç',
                    '√Åudio recebido! üéß',
                    'Entendi perfeitamente! üîä',
                    '√ìtima mensagem de √°udio! üé§'
                ];
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                
                const responseData = {
                    id: Date.now() + 1,
                    text: randomResponse,
                    user: 'CM',
                    timestamp: new Date().toISOString(),
                    isOwn: false,
                    type: 'text'
                };
                
                addMessageToChat(responseData);
            }, 1000 + Math.random() * 2000);
        }

        function addAudioMessageToChat(messageData) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${messageData.isOwn ? 'own' : ''}`;
            
            const time = new Date(messageData.timestamp).toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit'
            });
            
            // Buscar foto do usu√°rio
            const usuario = usuarios.find(u => u.avatar === messageData.user || u.nome.split(' ').map(n => n[0]).join('').toUpperCase().substring(0, 2) === messageData.user);
            const avatarContent = usuario && usuario.foto ? 
                `<img src="${usuario.foto}" style="width: 32px; height: 32px; border-radius: 50%; object-fit: cover; border: 2px solid rgba(255, 255, 255, 0.1);">` :
                `<div class="message-avatar">${messageData.user}</div>`;
            
            messageDiv.innerHTML = `
                ${avatarContent}
                <div class="message-content">
                    <div class="message-bubble">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span>üéµ Mensagem de √°udio</span>
                            <button onclick="playAudio('${messageData.audioUrl}')" style="background: rgba(255,255,255,0.2); border: none; border-radius: 50%; width: 30px; height: 30px; color: white; cursor: pointer;">‚ñ∂Ô∏è</button>
                        </div>
                        <audio id="audio-${messageData.id}" style="display: none;">
                            <source src="${messageData.audioUrl}" type="audio/wav">
                        </audio>
                    </div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Salvar mensagem no localStorage
            chatMessages.push(messageData);
            saveData('chatMessages', chatMessages);
        }

        function playAudio(audioUrl) {
            const audio = new Audio(audioUrl);
            audio.play().catch(error => {
                console.error('Erro ao reproduzir √°udio:', error);
                showNotification('‚ùå Erro ao reproduzir √°udio', 'error');
            });
        }

        // Fun√ß√£o para preview de foto
        function previewFoto(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('fotoPreview');
                    const img = document.getElementById('previewImg');
                    img.src = e.target.result;
                    preview.style.display = 'block';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Sistema de sincroniza√ß√£o de chat em tempo real
        function syncChat() {
            // Simular sincroniza√ß√£o com outros usu√°rios
            setInterval(() => {
                const savedMessages = loadData('chatMessages', []);
                const currentMessagesCount = document.getElementById('chatMessages').children.length;
                
                if (savedMessages.length > currentMessagesCount) {
                    // H√° novas mensagens, recarregar chat
                    loadChatMessages();
                }
            }, 5000); // Verificar a cada 5 segundos
        }

        function loadChatMessages() {
            const savedMessages = loadData('chatMessages', []);
            const chatMessagesContainer = document.getElementById('chatMessages');
            
            // Limpar mensagens atuais (exceto as padr√£o)
            const defaultMessages = chatMessagesContainer.innerHTML;
            
            savedMessages.forEach(message => {
                if (message.type === 'audio') {
                    addAudioMessageToChat(message);
                } else {
                    addMessageToChat(message);
                }
            });
        }

        // Initialize System on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Sistema NOVATEK carregado e pronto para identifica√ß√£o');
            
            // Carregar dados b√°sicos
            loadAllData();
            
            // Iniciar sincroniza√ß√£o do chat
            syncChat();
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'994ec54673508309',t:'MTc2MTUzMjIxNy4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html><!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NOVATEK - Sistema Financeiro Avan√ßado</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #2d1b69 100%);
            color: #e0e7ff;
            overflow-x: hidden;
            min-height: 100%;
            position: relative;
        }

        /* Animated Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(6, 182, 212, 0.05) 0%, transparent 50%);
            animation: backgroundMove 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes backgroundMove {
            0%, 100% { transform: translateX(0) translateY(0); }
            25% { transform: translateX(-20px) translateY(-10px); }
            50% { transform: translateX(20px) translateY(10px); }
            75% { transform: translateX(-10px) translateY(20px); }
        }

        /* Login Screen */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100%;
            padding: 2rem;
            animation: fadeIn 0.8s ease-out;
        }

        .login-box {
            background: rgba(15, 23, 42, 0.9);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 32px;
            padding: 3rem;
            width: 100%;
            max-width: 450px;
            box-shadow: 
                0 0 80px rgba(59, 130, 246, 0.4), 
                0 0 120px rgba(147, 51, 234, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            animation: slideUp 0.8s ease-out;
            position: relative;
            overflow: hidden;
        }

        .login-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.8), transparent);
            animation: shimmer 2s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .logo {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .logo h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 50%, #06b6d4 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(59, 130, 246, 0.6);
            animation: glow 3s ease-in-out infinite alternate;
            letter-spacing: -2px;
        }

        .logo p {
            color: #06b6d4;
            font-size: 0.875rem;
            margin-top: 0.5rem;
            letter-spacing: 4px;
            font-weight: 500;
            text-transform: uppercase;
        }

        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn-primary {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
        }

        .dashboard {
            display: none;
            background: #f8f9fa;
            min-height: 100vh;
        }

        .dashboard.active {
            display: block;
        }

        .header {
            background: white;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header h1 {
            color: #667eea;
            margin: 0;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }

        .nav-tabs {
            background: white;
            padding: 0 20px;
            display: flex;
            gap: 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .nav-tab {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .nav-tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }

        .nav-tab:hover {
            background: #f8f9fa;
        }

        .content {
            padding: 30px 20px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-title {
            font-size: 14px;
            color: #666;
            margin-bottom: 10px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .card-value {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .card-change {
            font-size: 14px;
            color: #28a745;
        }

        .section {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .btn-secondary {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: background 0.3s;
        }

        .btn-secondary:hover {
            background: #5a6fd8;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e9ecef;
        }

        .table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #333;
        }

        .table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active {
            background: #d4edda;
            color: #155724;
        }

        .status-pending {
            background: #fff3cd;
            color: #856404;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #28a745;
            color: white;
            border-radius: 10px;
            z-index: 2000;
            animation: slideIn 0.3s ease;
        }

        .notification.error {
            background: #dc3545;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .action-buttons {
            display: flex;
            gap: 5px;
        }

        .btn-icon {
            padding: 8px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-icon:hover {
            background: #e9ecef;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }
    </style>
</head>
<body>


    <!-- Dashboard -->
    <div id="dashboard" class="dashboard">
        <div class="header">
            <h1>NOVATEK</h1>
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">U</div>
                <div>
                    <div id="userNameDisplay">Usu√°rio</div>
                    <small>Sistema Ativo</small>
                </div>
            </div>
        </div>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showTab('dashboard')">üìä Dashboard</button>
            <button class="nav-tab" onclick="showTab('clientes')">üë• Clientes</button>
            <button class="nav-tab" onclick="showTab('financeiro')">üí∞ Financeiro</button>
            <button class="nav-tab" onclick="showTab('relatorios')">üìà Relat√≥rios</button>
        </div>

        <div class="content">
            <!-- Dashboard Tab -->
            <div id="tab-dashboard" class="tab-content active">
                <div class="cards-grid">
                    <div class="card">
                        <div class="card-title">Receitas do M√™s</div>
                        <div class="card-value" id="totalReceitas">R$ 0</div>
                        <div class="card-change">üìà Crescimento mensal</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Despesas do M√™s</div>
                        <div class="card-value" id="totalDespesas">R$ 0</div>
                        <div class="card-change">üìä Controle de gastos</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Lucro L√≠quido</div>
                        <div class="card-value" id="lucroLiquido">R$ 0</div>
                        <div class="card-change">üí∞ Resultado final</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Clientes Ativos</div>
                        <div class="card-value" id="totalClientes">0</div>
                        <div class="card-change">üë• Base de clientes</div>
                    </div>
                </div>
            </div>

            <!-- Clientes Tab -->
            <div id="tab-clientes" class="tab-content">
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">üë• Gest√£o de Clientes</h2>
                        <button class="btn-secondary" onclick="openModal('clienteModal')">‚ûï Novo Cliente</button>
                    </div>
                    
                    <table class="table" id="clientesTable">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Email</th>
                                <th>Telefone</th>
                                <th>Status</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="clientesTableBody">
                            <tr>
                                <td colspan="5" class="empty-state">
                                    <div class="empty-icon">üë•</div>
                                    <div>Nenhum cliente cadastrado</div>
                                    <small>Clique em "Novo Cliente" para come√ßar</small>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Financeiro Tab -->
            <div id="tab-financeiro" class="tab-content">
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">üí∞ Controle Financeiro</h2>
                        <button class="btn-secondary" onclick="openModal('financeiroModal')">‚ûï Nova Movimenta√ß√£o</button>
                    </div>
                    
                    <table class="table" id="financeiroTable">
                        <thead>
                            <tr>
                                <th>Data</th>
                                <th>Descri√ß√£o</th>
                                <th>Tipo</th>
                                <th>Valor</th>
                                <th>A√ß√µes</th>
                            </tr>
                        </thead>
                        <tbody id="financeiroTableBody">
                            <tr>
                                <td colspan="5" class="empty-state">
                                    <div class="empty-icon">üí∞</div>
                                    <div>Nenhuma movimenta√ß√£o registrada</div>
                                    <small>Clique em "Nova Movimenta√ß√£o" para come√ßar</small>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Relat√≥rios Tab -->
            <div id="tab-relatorios" class="tab-content">
                <div class="section">
                    <div class="section-header">
                        <h2 class="section-title">üìà Relat√≥rios e An√°lises</h2>
                    </div>
                    
                    <div class="section">
                        <h3 style="margin-bottom: 20px; color: #333;">üîç Filtros de Relat√≥rio</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                            <div class="form-group">
                                <label>Data Inicial</label>
                                <input type="date" id="dataInicial" style="width: 100%; padding: 10px; border: 2px solid #e1e5e9; border-radius: 8px;">
                            </div>
                            <div class="form-group">
                                <label>Data Final</label>
                                <input type="date" id="dataFinal" style="width: 100%; padding: 10px; border: 2px solid #e1e5e9; border-radius: 8px;">
                            </div>
                            <div class="form-group">
                                <label>Tipo de Relat√≥rio</label>
                                <select id="tipoRelatorio" style="width: 100%; padding: 10px; border: 2px solid #e1e5e9; border-radius: 8px;">
                                    <option value="completo">üìä Relat√≥rio Completo</option>
                                    <option value="financeiro">üí∞ Apenas Financeiro</option>
                                    <option value="clientes">üë• Apenas Clientes</option>
                                    <option value="receitas">üìà Apenas Receitas</option>
                                    <option value="despesas">üìâ Apenas Despesas</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label style="opacity: 0;">A√ß√£o</label>
                                <button class="btn-secondary" onclick="gerarRelatorioPersonalizado()" style="width: 100%; padding: 12px;">üìÑ Gerar Relat√≥rio</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="cards-grid">
                        <div class="card">
                            <div class="card-title">Relat√≥rio R√°pido</div>
                            <div class="card-value">√öltimos 30 dias</div>
                            <button class="btn-secondary" onclick="gerarRelatorioRapido('30dias')">üìÑ Gerar</button>
                        </div>
                        <div class="card">
                            <div class="card-title">Relat√≥rio Mensal</div>
                            <div class="card-value">M√™s Atual</div>
                            <button class="btn-secondary" onclick="gerarRelatorioRapido('mes')">üìä Gerar</button>
                        </div>
                        <div class="card">
                            <div class="card-title">Relat√≥rio Anual</div>
                            <div class="card-value">Ano Atual</div>
                            <button class="btn-secondary" onclick="gerarRelatorioRapido('ano')">üìà Gerar</button>
                        </div>
                        <div class="card">
                            <div class="card-title">Exportar Dados</div>
                            <div class="card-value">Backup Completo</div>
                            <button class="btn-secondary" onclick="exportarDados()">üíæ Exportar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Cliente -->
    <div id="clienteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üë§ Novo Cliente</h3>
                <button class="close-btn" onclick="closeModal('clienteModal')">&times;</button>
            </div>
            <form id="clienteForm">
                <div class="form-group">
                    <label>Nome Completo</label>
                    <input type="text" name="nome" required>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" required>
                </div>
                <div class="form-group">
                    <label>Telefone</label>
                    <input type="tel" name="telefone" required>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Cliente</button>
            </form>
        </div>
    </div>

    <!-- Modal Financeiro -->
    <div id="financeiroModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">üí∞ Nova Movimenta√ß√£o</h3>
                <button class="close-btn" onclick="closeModal('financeiroModal')">&times;</button>
            </div>
            <form id="financeiroForm">
                <div class="form-group">
                    <label>Data</label>
                    <input type="date" name="data" required>
                </div>
                <div class="form-group">
                    <label>Descri√ß√£o</label>
                    <input type="text" name="descricao" required>
                </div>
                <div class="form-group">
                    <label>Tipo</label>
                    <select name="tipo" required>
                        <option value="">Selecione...</option>
                        <option value="receita">üí∞ Receita</option>
                        <option value="despesa">üí∏ Despesa</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Valor (R$)</label>
                    <input type="number" name="valor" step="0.01" required>
                </div>
                <button type="submit" class="btn-primary">üíæ Salvar Movimenta√ß√£o</button>
            </form>
        </div>
    </div>

    <script>
        // Dados do sistema
        let clientes = [];
        let movimentacoes = [];
        let currentUser = '';

        // Sistema de Login
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const userName = document.getElementById('userName').value.trim();
            
            if (userName.length >= 2) {
                currentUser = userName;
                
                // Gerar iniciais
                const initials = userName.split(' ')
                    .map(name => name.charAt(0).toUpperCase())
                    .join('')
                    .substring(0, 2);
                
                // Atualizar interface
                document.getElementById('userAvatar').textContent = initials;
                document.getElementById('userNameDisplay').textContent = userName;
                
                // Mostrar dashboard
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('dashboard').classList.add('active');
                
                showNotification('‚úÖ Bem-vindo ao sistema NOVATEK!');
                
                // Carregar dados
                loadData();
                updateDashboard();
            } else {
                showNotification('‚ùå Digite um nome v√°lido!', 'error');
            }
        });

        // Sistema de Abas
        function showTab(tabName) {
            // Remover active de todas as abas
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Ativar aba selecionada
            event.target.classList.add('active');
            document.getElementById('tab-' + tabName).classList.add('active');
        }

        // Sistema de Modais
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // Fechar modal clicando fora
        document.querySelectorAll('.modal').forEach(modal => {
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        });

        // Formul√°rio de Cliente
        document.getElementById('clienteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const cliente = {
                id: editingId || Date.now(),
                nome: formData.get('nome'),
                email: formData.get('email'),
                telefone: formData.get('telefone'),
                status: 'ativo'
            };
            
            if (editingId) {
                // Editar cliente existente
                const index = clientes.findIndex(c => c.id === editingId);
                clientes[index] = cliente;
                showNotification('‚úÖ Cliente atualizado com sucesso!');
            } else {
                // Novo cliente
                clientes.push(cliente);
                showNotification('‚úÖ Cliente salvo com sucesso!');
            }
            
            saveData();
            renderClientes();
            updateDashboard();
            closeModal('clienteModal');
            this.reset();
            
            // Reset modal title and editing state
            document.querySelector('#clienteModal .modal-title').textContent = 'üë§ Novo Cliente';
            editingId = null;
        });

        // Formul√°rio Financeiro
        document.getElementById('financeiroForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const movimentacao = {
                id: editingId || Date.now(),
                data: formData.get('data'),
                descricao: formData.get('descricao'),
                tipo: formData.get('tipo'),
                valor: parseFloat(formData.get('valor'))
            };
            
            if (editingId) {
                // Editar movimenta√ß√£o existente
                const index = movimentacoes.findIndex(m => m.id === editingId);
                movimentacoes[index] = movimentacao;
                showNotification('‚úÖ Movimenta√ß√£o atualizada com sucesso!');
            } else {
                // Nova movimenta√ß√£o
                movimentacoes.push(movimentacao);
                showNotification('‚úÖ Movimenta√ß√£o salva com sucesso!');
            }
            
            saveData();
            renderFinanceiro();
            updateDashboard();
            closeModal('financeiroModal');
            this.reset();
            
            // Reset modal title and editing state
            document.querySelector('#financeiroModal .modal-title').textContent = 'üí∞ Nova Movimenta√ß√£o';
            editingId = null;
        });

        // Renderizar Clientes
        function renderClientes() {
            const tbody = document.getElementById('clientesTableBody');
            
            if (clientes.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="empty-state">
                            <div class="empty-icon">üë•</div>
                            <div>Nenhum cliente cadastrado</div>
                            <small>Clique em "Novo Cliente" para come√ßar</small>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = clientes.map(cliente => `
                <tr>
                    <td><strong>${cliente.nome}</strong></td>
                    <td>${cliente.email}</td>
                    <td>${cliente.telefone}</td>
                    <td><span class="status-badge status-active">Ativo</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editarCliente(${cliente.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon btn-danger" onclick="excluirCliente(${cliente.id})" title="Excluir">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Renderizar Financeiro
        function renderFinanceiro() {
            const tbody = document.getElementById('financeiroTableBody');
            
            if (movimentacoes.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="5" class="empty-state">
                            <div class="empty-icon">üí∞</div>
                            <div>Nenhuma movimenta√ß√£o registrada</div>
                            <small>Clique em "Nova Movimenta√ß√£o" para come√ßar</small>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = movimentacoes.map(mov => `
                <tr>
                    <td>${new Date(mov.data).toLocaleDateString('pt-BR')}</td>
                    <td>${mov.descricao}</td>
                    <td><span style="color: ${mov.tipo === 'receita' ? '#28a745' : '#dc3545'}">${mov.tipo === 'receita' ? 'üí∞ Receita' : 'üí∏ Despesa'}</span></td>
                    <td style="color: ${mov.tipo === 'receita' ? '#28a745' : '#dc3545'}; font-weight: bold;">${mov.tipo === 'receita' ? '+' : '-'} R$ ${mov.valor.toLocaleString('pt-BR')}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-icon" onclick="editarMovimentacao(${mov.id})" title="Editar">‚úèÔ∏è</button>
                            <button class="btn-icon btn-danger" onclick="excluirMovimentacao(${mov.id})" title="Excluir">üóëÔ∏è</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        // Atualizar Dashboard
        function updateDashboard() {
            const receitas = movimentacoes.filter(m => m.tipo === 'receita').reduce((sum, m) => sum + m.valor, 0);
            const despesas = movimentacoes.filter(m => m.tipo === 'despesa').reduce((sum, m) => sum + m.valor, 0);
            const lucro = receitas - despesas;
            
            document.getElementById('totalReceitas').textContent = `R$ ${receitas.toLocaleString('pt-BR')}`;
            document.getElementById('totalDespesas').textContent = `R$ ${despesas.toLocaleString('pt-BR')}`;
            document.getElementById('lucroLiquido').textContent = `R$ ${lucro.toLocaleString('pt-BR')}`;
            document.getElementById('totalClientes').textContent = clientes.length;
        }

        // Fun√ß√µes de A√ß√£o
        let editingId = null;

        function editarCliente(id) {
            const cliente = clientes.find(c => c.id === id);
            if (!cliente) return;
            
            editingId = id;
            
            // Preencher formul√°rio
            const form = document.getElementById('clienteForm');
            form.nome.value = cliente.nome;
            form.email.value = cliente.email;
            form.telefone.value = cliente.telefone;
            
            // Alterar t√≠tulo do modal
            document.querySelector('#clienteModal .modal-title').textContent = '‚úèÔ∏è Editar Cliente';
            
            openModal('clienteModal');
            showNotification('üìù Editando cliente...');
        }

        function excluirCliente(id) {
            if (confirm('Tem certeza que deseja excluir este cliente?')) {
                clientes = clientes.filter(c => c.id !== id);
                saveData();
                renderClientes();
                updateDashboard();
                showNotification('üóëÔ∏è Cliente exclu√≠do com sucesso!');
            }
        }

        function editarMovimentacao(id) {
            const movimentacao = movimentacoes.find(m => m.id === id);
            if (!movimentacao) return;
            
            editingId = id;
            
            // Preencher formul√°rio
            const form = document.getElementById('financeiroForm');
            form.data.value = movimentacao.data;
            form.descricao.value = movimentacao.descricao;
            form.tipo.value = movimentacao.tipo;
            form.valor.value = movimentacao.valor;
            
            // Alterar t√≠tulo do modal
            document.querySelector('#financeiroModal .modal-title').textContent = '‚úèÔ∏è Editar Movimenta√ß√£o';
            
            openModal('financeiroModal');
            showNotification('üìù Editando movimenta√ß√£o...');
        }

        function excluirMovimentacao(id) {
            if (confirm('Tem certeza que deseja excluir esta movimenta√ß√£o?')) {
                movimentacoes = movimentacoes.filter(m => m.id !== id);
                saveData();
                renderFinanceiro();
                updateDashboard();
                showNotification('üóëÔ∏è Movimenta√ß√£o exclu√≠da com sucesso!');
            }
        }

        // Fun√ß√µes de Relat√≥rio Melhoradas
        function gerarRelatorioPersonalizado() {
            const dataInicial = document.getElementById('dataInicial').value;
            const dataFinal = document.getElementById('dataFinal').value;
            const tipo = document.getElementById('tipoRelatorio').value;
            
            if (!dataInicial || !dataFinal) {
                showNotification('‚ùå Selecione as datas inicial e final!', 'error');
                return;
            }
            
            showNotification('üìä Gerando relat√≥rio personalizado...');
            
            setTimeout(() => {
                const relatorio = gerarConteudoRelatorio(dataInicial, dataFinal, tipo);
                mostrarRelatorio(relatorio, `Relat√≥rio ${tipo} - ${dataInicial} a ${dataFinal}`);
                showNotification('‚úÖ Relat√≥rio gerado com sucesso!');
            }, 1500);
        }

        function gerarRelatorioRapido(periodo) {
            showNotification('üìä Gerando relat√≥rio...');
            
            let dataInicial, dataFinal;
            const hoje = new Date();
            
            switch(periodo) {
                case '30dias':
                    dataFinal = hoje.toISOString().split('T')[0];
                    dataInicial = new Date(hoje.getTime() - 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
                    break;
                case 'mes':
                    dataInicial = new Date(hoje.getFullYear(), hoje.getMonth(), 1).toISOString().split('T')[0];
                    dataFinal = hoje.toISOString().split('T')[0];
                    break;
                case 'ano':
                    dataInicial = new Date(hoje.getFullYear(), 0, 1).toISOString().split('T')[0];
                    dataFinal = hoje.toISOString().split('T')[0];
                    break;
            }
            
            setTimeout(() => {
                const relatorio = gerarConteudoRelatorio(dataInicial, dataFinal, 'completo');
                mostrarRelatorio(relatorio, `Relat√≥rio ${periodo}`);
                showNotification('‚úÖ Relat√≥rio gerado com sucesso!');
            }, 1500);
        }

        function gerarConteudoRelatorio(dataInicial, dataFinal, tipo) {
            const movimentacoesFiltradas = movimentacoes.filter(m => {
                const dataMovimentacao = new Date(m.data);
                const inicio = new Date(dataInicial);
                const fim = new Date(dataFinal);
                return dataMovimentacao >= inicio && dataMovimentacao <= fim;
            });
            
            const receitas = movimentacoesFiltradas.filter(m => m.tipo === 'receita');
            const despesas = movimentacoesFiltradas.filter(m => m.tipo === 'despesa');
            const totalReceitas = receitas.reduce((sum, r) => sum + r.valor, 0);
            const totalDespesas = despesas.reduce((sum, d) => sum + d.valor, 0);
            const saldo = totalReceitas - totalDespesas;
            
            let conteudo = `
                üìä RELAT√ìRIO NOVATEK
                Per√≠odo: ${new Date(dataInicial).toLocaleDateString('pt-BR')} a ${new Date(dataFinal).toLocaleDateString('pt-BR')}
                Gerado em: ${new Date().toLocaleDateString('pt-BR')} √†s ${new Date().toLocaleTimeString('pt-BR')}
                
                üí∞ RESUMO FINANCEIRO:
                ‚Ä¢ Total de Receitas: R$ ${totalReceitas.toLocaleString('pt-BR')}
                ‚Ä¢ Total de Despesas: R$ ${totalDespesas.toLocaleString('pt-BR')}
                ‚Ä¢ Saldo do Per√≠odo: R$ ${saldo.toLocaleString('pt-BR')}
                ‚Ä¢ Movimenta√ß√µes: ${movimentacoesFiltradas.length}
            `;
            
            if (tipo === 'completo' || tipo === 'clientes') {
                conteudo += `
                
                üë• CLIENTES:
                ‚Ä¢ Total de Clientes: ${clientes.length}
                ‚Ä¢ Clientes Ativos: ${clientes.filter(c => c.status === 'ativo').length}
                `;
            }
            
            if (tipo === 'receitas' || tipo === 'completo') {
                conteudo += `
                
                üìà RECEITAS DETALHADAS:
                ${receitas.map(r => `‚Ä¢ ${new Date(r.data).toLocaleDateString('pt-BR')} - ${r.descricao}: R$ ${r.valor.toLocaleString('pt-BR')}`).join('\n')}
                `;
            }
            
            if (tipo === 'despesas' || tipo === 'completo') {
                conteudo += `
                
                üìâ DESPESAS DETALHADAS:
                ${despesas.map(d => `‚Ä¢ ${new Date(d.data).toLocaleDateString('pt-BR')} - ${d.descricao}: R$ ${d.valor.toLocaleString('pt-BR')}`).join('\n')}
                `;
            }
            
            return conteudo;
        }

        function mostrarRelatorio(conteudo, titulo) {
            const modal = document.createElement('div');
            modal.className = 'modal active';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 800px; max-height: 80vh;">
                    <div class="modal-header">
                        <h3 class="modal-title">${titulo}</h3>
                        <button class="close-btn" onclick="this.closest('.modal').remove()">&times;</button>
                    </div>
                    <div style="white-space: pre-line; font-family: monospace; background: #f8f9fa; padding: 20px; border-radius: 8px; overflow-y: auto; max-height: 400px;">
                        ${conteudo}
                    </div>
                    <div style="margin-top: 20px; display: flex; gap: 10px;">
                        <button class="btn-secondary" onclick="imprimirRelatorio()" style="flex: 1;">üñ®Ô∏è Imprimir</button>
                        <button class="btn-secondary" onclick="this.closest('.modal').remove()" style="flex: 1;">‚úÖ Fechar</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            modal.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.remove();
                }
            });
        }

        function exportarDados() {
            showNotification('üíæ Preparando exporta√ß√£o...');
            
            const dados = {
                clientes: clientes,
                movimentacoes: movimentacoes,
                exportadoEm: new Date().toISOString(),
                usuario: currentUser
            };
            
            const dataStr = JSON.stringify(dados, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const link = document.createElement('a');
            link.href = url;
            link.download = `backup_novatek_${new Date().toISOString().split('T')[0]}.json`;
            link.style.display = 'none';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            URL.revokeObjectURL(url);
            
            setTimeout(() => {
                showNotification('‚úÖ Dados exportados com sucesso!');
            }, 1000);
        }

        function imprimirRelatorio() {
            window.print();
        }

        // Sistema de Notifica√ß√µes
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Salvar/Carregar Dados
        function saveData() {
            localStorage.setItem('novatek_clientes', JSON.stringify(clientes));
            localStorage.setItem('novatek_movimentacoes', JSON.stringify(movimentacoes));
        }

        function loadData() {
            const savedClientes = localStorage.getItem('novatek_clientes');
            const savedMovimentacoes = localStorage.getItem('novatek_movimentacoes');
            
            if (savedClientes) {
                clientes = JSON.parse(savedClientes);
                renderClientes();
            }
            
            if (savedMovimentacoes) {
                movimentacoes = JSON.parse(savedMovimentacoes);
                renderFinanceiro();
            }
        }

        // Inicializar sistema
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‚úÖ Sistema NOVATEK carregado e funcionando!');
        });
    </script>
</body>
</html>
